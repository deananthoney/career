"use strict";function isScrolledIntoView(a){var b=$(window).scrollTop(),c=b+$(window).height()-40,d=$(a).offset().top,e=d+$(a).height();return e<c&&d>b}function offsetAnchor(){0!==location.hash.length&&window.scrollTo(window.scrollX,window.scrollY-100)}angular.module("jpmorganApp",["ngAnimate","ngSanitize","MassAutoComplete","uiGmapgoogle-maps"]).config(function(){$.fn.extend({doesntHaveClasses:function(a){var b=this;for(var c in a)if($(b).hasClass(a[c]))return!1;return!0}}),Array.prototype.shuffle=function(){var a,b,c=this.length;if(0===c)return this;for(;--c;)a=Math.floor(Math.random()*(c+1)),b=this[c],this[c]=this[a],this[a]=b;return this},Array.prototype.unique=function(){for(var a={},b=[],c=0,d=this.length;c<d;++c)a[this[c]]||(a[this[c]]=!0,b.push(this[c]));return b},$.extend({inArrayIn:function(a,b,c){if("string"!=typeof a)return $.inArray.apply(this,arguments);if(b){var d=b.length;for(c=c?c<0?Math.max(0,d+c):c:0,a=a.toLowerCase();c<d;c++)if(c in b&&b[c].toLowerCase()===a)return c}return-1}})}),angular.module("jpmorganApp").directive("a",function(){return{restrict:"E",link:function(a,b,c){(c.ngClick||""===c.href||"#"===c.href)&&b.on("click",function(a){a.preventDefault()})}}}),angular.module("jpmorganApp").directive("accordion",["$rootScope",function(a){return{restrict:"A",controller:["$scope","$element",function(b,c){var d=$(c).find(".accordion-section-title"),e=$(c).find(".accordion-section"),f=$(c).find(".accordion-section-content");b.closeSection=function(){d.removeClass("active"),e.removeClass("active"),f.slideUp(100).removeClass("open")},b.init=function(){d.on("click",function(b){b.preventDefault();var d=$(this).data("content-trigger"),e=$(c).find('[data-content="'+d+'"]');return $(b.target).is(".active")?($(this).removeClass("active").parent().removeClass("active"),e.slideUp(100).removeClass("open")):(a.$broadcast("track",{trackName:"showContent",setVar:"topic",setVarVal:$(this).text()}),$(this).addClass("active").parent().addClass("active"),e.slideDown(100).addClass("open")),!1})},b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("searchautocomplete",["$timeout","$rootScope","$http","$sce",function(a,b,c,d){return{restrict:"A",controller:["$scope","$element",function(e,f){var g=$(f),h=g.find(".autocomplete"),i=h.parent(".autocomplete-wrapper"),j=g.find(".typing");e.initialAutocompleteSelected=!1,e.autocompleteResults=!1,e.showNoResults=!1,e.deactivateNewSuggestion=!1,e.showPopular=!0,e.showTyping=!0,e.sentenceArr=e.typingArr=[];var k={strings:[],typeSpeed:50,startDelay:0,backSpeed:0,backDelay:7e3,loop:!0,loopCount:!1,showCursor:!0,cursorChar:"|",contentType:"text",preStringTyped:function(a){e.sentenceArr[a]&&e.changeSearchMoment(a)},onStringTyped:function(){},resetCallback:function(){}};e.changeSearchMoment=function(a){e.typingArr.length>0&&b.safeApply(function(){e.moment=e.typingArr[a]})},e.generateSearchData=function(){var a=g.data("max-range"),b=g.data("min-range");angular.forEach(e.sentenceArr,function(){e.typingArr.push({timestamp:Math.floor(Math.random()*(a-b)+b),location:e.citiesArr[Math.floor(Math.random()*(e.citiesArr.length-0)+0)]})})},e.resetTyping=function(){j.typed("reset"),g.find(".typing-wrapper-inner").html('<span id="typed" class="typing"></span>'),j=g.find(".typing"),a(function(){h.val(""),j.typed()},200)},e.reactivateTyping=function(){return!e.showTyping&&void b.safeApply(function(){b.$broadcast("resetautocompleteSelected"),void 0===e.autoVal.value&&(e.autoVal={}),e.autoVal.value="",e.resetTyping(),e.showTyping=!0})},e.initTyping=function(){c.get(g.data("url"),{cache:!0}).success(function(a){e.sentencesObj=a.sentences;var b=e.sentencesObj.map(function(a){return a.sentence}).slice(0,10);e.sentenceArr=e.sentencesObj.map(function(a){return a.sentence}).shuffle(),e.topSearches=[];for(var c=0;c<b.length;c++)e.topSearches.push({label:b[c],value:b[c]});e.topSearches=e.topSearches.shuffle(),e.citiesArr=a.cities.shuffle(),k.strings=e.sentenceArr,j.typed(k),e.generateSearchData()}).error(function(){})};var l=a(function(){e.detectIE()?$("body").focus():e.showTyping=!1},100);e.checkIfAnyResults=function(){if(!e.autoVal.value||0===e.autoVal.value.length)return e.showNoResults=!1,e.showNoResults;if(e.autocompleteResults&&e.autocompleteResults.length<1||$.inArrayIn(e.autoVal.value,e.sentenceArr)<0)e.showNoResults=!0,b.$broadcast("track",{trackName:"unsuccessfulSearch",setVar:"searchTerm",setVarVal:e.autoVal.value}),e.deactivateNewSuggestion||(e.tryWord=e.topSearches[Math.floor(Math.random()*e.topSearches.length)],e.deactivateNewSuggestion=!0);else{e.showNoResults=!1;for(var a=0;a<e.sentenceArr.length;a++){var c=e.sentenceArr[a];c.toLowerCase()===e.autoVal.value.toLowerCase()&&(e.preselect(c),e.showTyping=!0,l())}}return b.safeApply(function(){e.showNoResults=e.showNoResults}),e.showNoResults},e.resetAll=function(){e.autoVal={},e.showPopular=!0,e.initialAutocompleteSelected=!1,e.autocompleteResults=!1,e.showNoResults=!1,e.deactivateNewSuggestion=!1,e.showTyping=!0,e.autocompleteSelection=!1},e.preselect=function(a){e.autoVal.value=a,e.autocompleteSelected({value:a})},e.suggestState=function(a){for(var b=a.toLowerCase().trim(),c=[],d=0;d<e.sentenceArr.length&&c.length<10;d++){var f=e.sentenceArr[d];f.toLowerCase().indexOf(b)>-1&&c.push({label:f,value:f})}return e.deactivateNewSuggestion=!1,e.autocompleteResults=c,e.showNoResults=!1,c},e.highlight=function(a,b){var c=new RegExp("("+b+")","gi");return a.replace(c,'<span class="highlight">$1</span>')},e.suggestStateWithHighlight=function(a){if(!(a.length<1)){var b=e.suggestState(a);return b.forEach(function(b){b.label=d.trustAsHtml(e.highlight(b.label,a))}),b}},e.autocompleteSelected=function(c){a(function(){$("html, body").animate({scrollTop:$("#career-finder").offset().top+$("#career-finder").height()+120},"1000","easeInOutExpo",function(){})},200),e.showNoResults=!1,e.showPopular=!1;var d=e.sentencesObj.filter(function(a){return a.sentence===c.value}).shift().id;b.safeApply(function(){e.initialAutocompleteSelected=!0,b.$broadcast("autocompleteSelected",{autocompleteId:d,autocompleteValue:c.value})})},e.selectPopularSearch=function(a){b.safeApply(function(){void 0===e.autoVal.value&&(e.autoVal={}),e.autoVal.value=e.topSearches[a].value,e.autocompleteSelected(e.topSearches[a])})},e.autoCompleteError=function(a){for(var b=0;b<e.sentenceArr.length;b++){var c=e.sentenceArr[b];c.toLowerCase()===a.toLowerCase()&&e.preselect(c)}},e.initAutocomplete=function(){b.safeApply(function(){e.autoVal={},e.autocompleteOptions={suggest:e.suggestStateWithHighlight,on_select:e.autocompleteSelected,on_detach:e.autoCompleteError}})},e.init=function(){e.initTyping(),e.initAutocomplete(),j.parent().on("click",function(c){c.preventDefault(),c.stopPropagation(),b.safeApply(function(){e.showTyping=!1,a(function(){"mobile"!==b.deviceResolution&&$(".autocomplete-input").focus(),i.addClass("is-active")},200)})}),b.$on("back-to-default-state",function(){e.initialAutocompleteSelected?e.resetAll():e.reactivateTyping()})},e.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("availablePrograms",["$http","$rootScope","$timeout",function(a,b,c){return{restrict:"A",controller:["$scope","$attrs","$element",function(d,e,f){var g=$(f);d.updateTriggered=!0,d.initialShowCount=d.showCount=8,d.cacheShowCount=d.showCount,d.initialized=!1,d.enableUpdateButton=!1,d.eventsCount=d.cachedEventsCount="",d.programFilter={},d.$watch("updateTriggered",function(){d.initialized&&(d.showCount=d.initialShowCount,d.programFilter=d.programFilter)}),d.$watchCollection("programFilter",function(){d.initialized&&(d.enableUpdateButton=!0)}),d.loadPrograms=function(c){a.get(c,{cache:!0}).success(function(a){a.status.success&&a.response.Programs&&b.safeApply(function(){d.programsList=a.response.Programs,d.programsCount=d.programsList.length,d.cachedEventsCount=d.programsList.length,d.createFilters(a.response.Programs)})}).error(function(){})},d.resetFilters=function(){$(".filter-wrappers input").removeAttr("disabled"),$(".filter-wrappers input:checked").removeAttr("checked"),$(".dropdown-filter-triggers-wrapper .dropdown-filter-trigger .badge").text(0).removeClass("active"),d.programFilter={},d.showCount=d.cacheShowCount},d.incrementShowCount=function(){d.showCount+=6,d.cacheShowCount=d.showCount},d.updateBadge=function(a){var b=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input:checked"),c=$(".dropdown-filter-triggers-wrapper").find("[data-open='"+d.openFilter+"']"),e=c.find(".badge");if("location"===d.openFilter){var f=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.country-checkbox:checked").length,g=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.region-checkbox:checked").length;f>0?e.text(f):e.text(g)}else e.text(b.length);b.length>0?e.addClass("active"):e.removeClass("active")},d.updateFilters=function(a){b.$broadcast("back-to-default-state");var c=[];$.each(d.programFilter,function(a,b){$.each(b,function(a,b){b&&c.push(a)})}),b.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:c.join()});var e=$(a.target);return d.updateBadge(e),d.updateTriggered=!0,!1},d.innerFilterAction=function(a){if(0===a.length)return!0;var b=!1;return $.each(a,function(a,c){if(c)return b=!0,!0}),b},d.filterAction=function(a){if(d.openFilter&&d.updateBadge(g.find(".update-filter-page")),d.updateTriggered){var b=[];if(d.programFilter.regionSelection){var c=[];angular.forEach(d.programFilter.regionSelection,function(b,d){b&&(a.region.toLowerCase()===d.toLowerCase()?c.push(!0):c.push(!1))}),d.innerFilterAction(c)?b.push(!0):b.push(!1)}if(d.programFilter.countrySelection){var e=[];angular.forEach(d.programFilter.countrySelection,function(b,c){if(b){var d=!1;angular.forEach(a.locations,function(a){a.toLowerCase()===c.toLowerCase()&&(e.push(!0),d=!0)}),d||e.push(!1)}}),d.innerFilterAction(e)?b.push(!0):b.push(!1)}var f=!1;return b.length>0?b.every(Boolean)&&(f=!0):f=!0,!!f}return!0},d.isRegionSelected=function(){var a=!1;return angular.forEach(d.programFilter.regionSelection,function(b){b&&(a=!0)}),!!a},d.checkIfCountryInRegion=function(a){var b=!0,c=!1;return d.programFilter.regionSelection&&angular.forEach(d.programFilter.regionSelection,function(e,f){e&&(c=!0,$.inArray(a.toString(),d.regionCountryArr[f])>-1&&(b=!1))}),b!==!1&&c&&(b=!0),d.programFilter.countrySelection&&void 0!==d.programFilter.countrySelection[a]&&b&&(d.programFilter.countrySelection[a]=!1),b},d.createFilters=function(a){var b=[],c=[],e=[],f=[],g=[];angular.forEach(a,function(a){a.region.length>0&&b.push(a.region),a.locations&&a.locations.length>0&&angular.forEach(a.locations,function(a){e.push(a)}),a.locations&&a.region&&a.region.length>0&&a.locations.length>0&&(void 0===c[a.region]&&(c[a.region]=[]),angular.forEach(a.locations,function(b){c[a.region].push(b)}),c[a.region]=c[a.region].unique())}),d.regionArr=b.unique().sort(),d.countryArr=e.unique().sort(),d.eventTypeArr=f.unique().sort(),d.regionCountryArr=c.sort(),d.campusArr=g.unique().sort()},d.hasCountrySelected=function(){var a=!1;return angular.forEach(d.programFilter.countrySelection,function(b,c){b&&(a=!0)}),a},d.hasIndiaAsLocation=function(a){var b=$.inArray("India",a);return b>-1},d.checkIfOnlyIndiaSelected=function(){var a=!1;return angular.forEach(d.programFilter.countrySelection,function(b,c){b&&"India"!==c&&(a=!0)}),a?d.hasCountrySelected()&&!1:d.hasCountrySelected()&&!0},d.formatDate=function(a){var b=a.substring(0,a.length-6).split("/"),c=new Date(b[2],b[1]-1,b[0]);return moment(new Date(c)).format("MMM DD, YYYY")},d.formatHref=function(a){return a&&a.length>0?a:"#"},d.init=function(){d.loadPrograms(e.url),c(function(){d.initialized=!0},200)},d.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("carousel",["$rootScope","$timeout","$window",function(a,b,c){return{restrict:"A",scope:{resolution:"@",carouselMobile:"=",carouselTablet:"=",carouselDesktop:"=",carouselControlColor:"@",carouselControlOnTop:"@",carouselGoToSlide:"@",pagination:"=",navigation:"=",autoplay:"="},controller:["$scope","$element","$attrs",function(d,e,f){d.carousel=!1;var g=!0;d.carouselOptions={slideSpeed:800,paginationSpeed:800,rewindSpeed:1e3,singleItem:!0,lazyLoad:!0,navigation:!1,addClassActive:!0,stopOnHover:!0,autoPlay:!1,rewindNav:!0,navigationText:['<span class="icon-arrow-left"></span>','<span class="icon-arrow-right"></span>'],afterMove:function(){a.safeApply(function(){b(function(){isNaN(d.carousel.data("owlCarousel").currentItem)?d.carouselPos=d.$parent.carouselPos=0:(d.$parent.carouselPos=d.carousel.data("owlCarousel").currentItem,d.carouselPos=d.carousel.data("owlCarousel").currentItem),d.$parent.showVideo=!1;for(var a in c.playerArr)d.isFunction(c.playerArr[a].pause)&&void 0===$("main").attr("data-homepagesearch")&&videojs(a).pause(!0)},d.carouselOptions.slideSpeed)})}},"false"===d.carouselControlOnTop&&$(e).addClass("controls-with-padding"),d.navigation&&(d.carouselOptions.navigation=!0),d.pagination&&(d.carouselOptions.pagination=d.pagination),d.autoplay&&(d.carouselOptions.autoPlay=d.autoplay),d.devices=[],d.devices.mobile=d.carouselMobile,d.devices.tablet=d.carouselTablet,d.devices.desktop=d.carouselDesktop,d.goToSlide=function(a){!g&&d.carousel&&d.carousel.data("owlCarousel")&&d.carousel.data("owlCarousel").goTo(a)},d.isFunction=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},d.reinit=function(){d.devices[a.deviceResolution]?d.carousel&&d.carousel.data("owlCarousel")?d.carousel.data("owlCarousel").reinit():d.init():d.carousel&&d.carousel.data("owlCarousel")&&d.carousel.data("owlCarousel").destroy()},d.init=function(){d.devices[a.deviceResolution]&&b(function(){d.carousel=$(e).owlCarousel(d.carouselOptions),d.carouselGoToSlide&&d.goToSlide(d.carouselGoToSlide),d.carouselControlColor&&$(e).addClass("carousel-control-color-"+d.carouselControlColor)},1),g&&(f.$observe("resolution",function(){d.reinit()}),g=!1)},d.init()}],link:function(a,b,c){a.$watch(c.carouselGoToSlide,function(b){void 0!==b&&a.goToSlide(b)})}}}]),angular.module("jpmorganApp").directive("circles",function(){return{restrict:"A",controller:["$scope","$element",function(a,b){$.fn.circles=function(){var a=$.extend({foregroundColor:"#556b2f",backgroundColor:"#eee",fillColor:!1,width:15,dimension:200,size:15,percent:50,animationStep:1});return this.each(function(){function b(a){p.clearRect(0,0,o.width,o.height),p.beginPath(),p.arc(q,r,t,v,u,!1),p.lineWidth=f-1,p.strokeStyle=k,p.stroke(),A&&(p.fillStyle=A,p.fill()),p.beginPath(),p.arc(q,r,t,-z,y*a-z,!1),p.lineWidth=f,p.strokeStyle=j,p.stroke(),w<i&&(w+=x,requestAnimationFrame(function(){b(Math.min(w,i)/100)}))}var c="",d="",e="",f="",g=0,h=0,i=100,j="",k="",l="",m=0,n="";$(this).addClass("circles"),c=void 0!==$(this).data("dimension")?$(this).data("dimension"):a.dimension,f=void 0!==$(this).data("width")?$(this).data("width"):a.width,g=void 0!==$(this).data("fontsize")?$(this).data("fontsize"):a.size,void 0!==$(this).data("percent")?(h=$(this).data("percent")/100,i=$(this).data("percent")):h=a.percent/100,j=void 0!==$(this).data("fgcolor")?$(this).data("fgcolor"):a.foregroundColor,k=void 0!==$(this).data("bgcolor")?$(this).data("bgcolor"):a.backgroundColor,m=void 0!==$(this).data("animation-step")?parseFloat($(this).data("animation-step")):a.animationStep,void 0!==$(this).data("text")?(d=$(this).data("text"),void 0!==$(this).data("icon")&&(l='<i class="fa '+$(this).data("icon")+'"></i>'),void 0!==$(this).data("type")?(n=$(this).data("type"),"half"===n?($(this).append('<span class="circle-text-half">'+l+d+"</span>"),$(this).find(".circle-text-half").css({"line-height":c/1.45+"px","font-size":g+"px"})):($(this).append('<span class="circle-text">'+l+d+"</span>"),$(this).find(".circle-text").css({"line-height":c+"px","font-size":g+"px"}))):($(this).append('<span class="circle-text">'+l+d+"</span>"),$(this).find(".circle-text").css({"line-height":c+"px","font-size":g+"px"}))):void 0!==$(this).data("icon"),void 0!==$(this).data("info")&&(e=$(this).data("info"),void 0!==$(this).data("type")?(n=$(this).data("type"),"half"===n?($(this).append('<span class="circle-info-half">'+e+"</span>"),$(this).find(".circle-info-half").css({"line-height":.9*c+"px"})):($(this).append('<span class="circle-info">'+e+"</span>"),$(this).find(".circle-info").css({"line-height":1.25*c+"px"}))):($(this).append('<span class="circle-info">'+e+"</span>"),$(this).find(".circle-info").css({"line-height":1.25*c+"px"}))),$(this).width(c+"px");var o=$("<canvas></canvas>").attr({width:c,height:c}).appendTo($(this)).get(0),p=o.getContext("2d"),q=o.width/2,r=o.height/2,s=360*h,t=(s*(Math.PI/180),o.width/2.5),u=2.3*Math.PI,v=0,w=0===m?i:0,x=Math.max(m,0),y=2*Math.PI,z=Math.PI/2,A=!1;void 0!==$(this).data("type")&&(n=$(this).data("type"),"half"===n&&(u=2*Math.PI,v=3.13,y=1*Math.PI,z=Math.PI/.996)),A=void 0!==$(this).data("fill")?$(this).data("fill"):a.fillColor,b(w/100)})}}],link:function(){}}}),angular.module("jpmorganApp").directive("dropdownFilters",["$rootScope",function(a){return{restrict:"A",controller:["$scope","$element",function(b,c){var d=$(c),e=($(c).find(".dropdown-list li > a"),d.find(".dropdown-filter-trigger")),f=$(".dropdown-header"),g=!1,h=!1;f.text($(".tabs li > a").parent().find(".active.dropdown-filter-trigger").text()),b.openFilter=!1,a.$watch("deviceResolution",function(){b.initialized&&"mobile"!==a.deviceResolution&&0===$("filter-wrapper-container").length}),b.closeDropdownFilter=function(){e.removeClass("is-active"),$(".filter-wrappers.filter-triggers").slideUp(200)},b.init=function(){e.on("click",function(c){return c.preventDefault(),"mobile"===a.deviceResolution,e.hasClass("dropdown-filter-trigger")||e.hasClass("is-active")||(d.find(".active").removeClass("active"),$(".tabs.dropdown-list").find("li.active").removeClass("active")),g=$(this),a.safeApply(function(){b.openFilter=g.data("open")}),h=g.hasClass("is-active"),e.removeClass("is-active"),f.text(g.text()),g.hasClass("dropdown-close")?(g.parent().parent().parent().parent().parent().removeClass("is-active"),$(".flex-wrapper").removeClass("drop-shadow"),$(".filter-wrappers.filter-triggers").slideUp(200)):(g.addClass("is-active"),g.parent().parent().parent().parent().parent().addClass("is-active"),$(".flex-wrapper").addClass("drop-shadow"),$(".filter-wrappers.filter-triggers").slideDown(200)),!1})},f.on("click",function(a){return a.preventDefault(),$(c).toggleClass("tabs-active"),!1}),a.$on("back-to-default-state",function(){b.closeDropdownFilter()}),a.$on("subMenuLoaded",function(){$(".tabs li a").on("click",function(a){a.preventDefault(),g=$(this),f.text(g.text())})}),b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("dropdown",["$rootScope",function(a){return{restrict:"A",scope:{isvisible:"="},controller:["$scope","$element",function(b,c){var d=$(c),e=d.find(".title"),f=d.find(".dropdown-list"),g=300;b.$watch("isvisible",function(){b.isvisible&&b.triggerInitialVal()}),b.closeDropdown=function(){f.slideUp(g),d.removeClass("is-open")},b.announceSelection=function(b,c,d){var e=[];e[c]=d,a.safeApply(function(){a.$broadcast(b,e)})},b.triggerInitialVal=function(){f.find("input:checked").each(function(a){b.announceSelection(d.data("broadcast"),d.data("broadcast-key"),$(this).attr("data-broadcast-val"))})},b.init=function(){var a=f.find(".is-active");if(a.length>0){var c=a.find("a").data("value");b.announceSelection(d.data("broadcast"),d.data("broadcast-key"),c)}e.on("click",function(a){return a.preventDefault(),d.hasClass("is-open")?b.closeDropdown():(f.slideDown(g),d.addClass("is-open")),!1}),f.find("input").change(function(){b.announceSelection(d.data("broadcast"),d.data("broadcast-key"),$(this).attr("data-broadcast-val")),b.closeDropdown()})},b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("dynamicHtml",["$compile",function(a){return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.dynamicHtml,function(d){c.html(d),a(c.contents())(b)})}}}]),angular.module("jpmorganApp").directive("events",["$http","$rootScope","$timeout",function(a,b,c){return{restrict:"A",controller:["$scope","$attrs","$element",function(d,e,f){var g=$(f);d.updateTriggered=!0,d.initialShowCount=d.showCount=6,d.cacheShowCount=d.showCount,d.initialized=!1,d.enableUpdateButton=!1,d.eventsCount=d.cachedEventsCount="",d.eventFilter={},d.$watch("updateTriggered",function(){d.initialized&&(d.showCount=d.initialShowCount,d.eventFilter=d.eventFilter)}),d.$watchCollection("eventFilter",function(){d.initialized&&(d.enableUpdateButton=!0)}),d.loadEvents=function(e){a.get(e,{cache:!0}).success(function(a){a.status.success&&a.response.Events&&b.safeApply(function(){c(function(){$(".events-listing .container").removeClass("loader center")},400),c(function(){d.eventsList=a.response.Events,d.eventsCount=d.eventsList.length,d.cachedEventsCount=d.eventsList.length,d.createFilters(a.response.Events),c(function(){$(".download-to-calendar").on("click",function(a){return b.$broadcast("track",{trackName:"iCal",setVar:"event",setVarVal:$(this).attr("eventname")}),!0})},200)},800)})}).error(function(){})},d.resetFilters=function(){$(".filter-wrappers input").removeAttr("disabled"),$(".filter-wrappers input:checked").removeAttr("checked"),$(".dropdown-filter-triggers-wrapper .dropdown-filter-trigger .badge").text(0).removeClass("active"),d.eventFilter={},d.showCount=d.cacheShowCount},d.incrementShowCount=function(){d.showCount+=6,d.cacheShowCount=d.showCount},d.updateBadge=function(a){var b=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input:checked"),c=$(".dropdown-filter-triggers-wrapper").find("[data-open='"+d.openFilter+"']"),e=c.find(".badge");if("location"===d.openFilter){var f=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.country-checkbox:checked").length,g=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.region-checkbox:checked").length;f>0?e.text(f):e.text(g)}else e.text(b.length);b.length>0?e.addClass("active"):e.removeClass("active")},d.updateFilters=function(a){b.$broadcast("back-to-default-state");var c=[];$.each(d.eventFilter,function(a,b){$.each(b,function(a,b){b&&c.push(a)})}),b.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:c.join()});var e=$(a.target);return d.updateBadge(e),d.updateTriggered=!0,!1},d.innerFilterAction=function(a){if(0===a.length)return!0;var b=!1;return $.each(a,function(a,c){if(c)return b=!0,!0}),b},d.filterAction=function(a){if(d.openFilter&&d.updateBadge(g.find(".update-filter-page")),d.updateTriggered){var b=[];if(d.eventFilter.regionSelection){var c=[];angular.forEach(d.eventFilter.regionSelection,function(b,d){b&&(a.participating_region.toLowerCase()===d.toLowerCase()?c.push(!0):c.push(!1))}),d.innerFilterAction(c)?b.push(!0):b.push(!1)}if(d.eventFilter.countrySelection){var e=[];angular.forEach(d.eventFilter.countrySelection,function(b,c){b&&(a.country.toLowerCase()===c.toLowerCase()?e.push(!0):e.push(!1))}),d.innerFilterAction(e)?b.push(!0):b.push(!1)}if(d.eventFilter.eventTypeSelection){var f=[];angular.forEach(d.eventFilter.eventTypeSelection,function(b,c){b&&(a.event_classification.toLowerCase()===c.toLowerCase()?f.push(!0):f.push(!1))}),d.innerFilterAction(f)?b.push(!0):b.push(!1)}if(d.eventFilter.campusSelection){var h=[];angular.forEach(d.eventFilter.campusSelection,function(b,c){b&&(a.campus_name.toLowerCase()===c.toLowerCase()?h.push(!0):h.push(!1))}),d.innerFilterAction(h)?b.push(!0):b.push(!1)}var i=!1;return b.length>0?b.every(Boolean)&&(i=!0):i=!0,!!i}return!0},d.isRegionSelected=function(){var a=!1;return angular.forEach(d.eventFilter.regionSelection,function(b){b&&(a=!0)}),!!a},d.checkIfCountryInRegion=function(a){var c=!0,e=!1;return d.eventFilter.regionSelection&&angular.forEach(d.eventFilter.regionSelection,function(b,f){b&&(e=!0,$.inArray(a.toString(),d.regionCountryArr[f])>-1&&(c=!1))}),c!==!1&&e&&(c=!0),d.eventFilter.countrySelection&&void 0!==d.eventFilter.countrySelection[a]&&c&&(d.eventFilter.countrySelection[a]=!1),c||b.safeApply(function(){d.eventFilter=d.eventFilter}),c},d.createFilters=function(a){var b=[],c=[],e=[],f=[],g=[];angular.forEach(a,function(a){a.participating_region.length>0&&b.push(a.participating_region),a.country.length>0&&e.push(a.country),a.campus_name.length>0&&g.push(a.campus_name),a.participating_region.length>0&&a.country.length>0&&(void 0===c[a.participating_region]&&(c[a.participating_region]=[]),c[a.participating_region].push(a.country),c[a.participating_region]=c[a.participating_region].unique()),a.event_classification.length>0&&f.push(a.event_classification)}),d.regionArr=b.unique().sort(),d.countryArr=e.unique().sort(),d.eventTypeArr=f.unique().sort(),d.regionCountryArr=c.sort(),d.campusArr=g.unique().sort()},d.formatDate=function(a){var b=a.split("/"),c=new Date(b[2],b[1]-1,b[0]);return moment(new Date(c)).format("MMM DD")},d.formatTime=function(a){return a.replace(/\s/g,"").toLowerCase()},d.formatHref=function(a){return a&&a.length>0?a:"#"},d.init=function(){d.loadEvents(e.url),c(function(){d.initialized=!0},200)},d.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("filter",function(){return{restrict:"A",scope:{contentElem:"@"},controller:["$scope","$element",function(a,b){var c=$(b).find(".filter-triggers .trigger"),d=[],e=$(a.contentElem).children();a.init=function(){c.change(function(){var a=$(this).val().toString();""===a&&e.removeClass("deactivated"),c.parent().find('input[type="radio"]').not(this).prop("checked",!1),d=[],this.checked?d.push(a):d.splice(d.indexOf(a),1),$.unique(d),d.length>0?e.each(function(){$(this).doesntHaveClasses(d)?$(this).addClass("deactivated"):$(this).removeClass("deactivated")}):e.removeClass("deactivated")})},a.init()}],link:function(){}}}),angular.module("jpmorganApp").directive("footer",function(){return{restrict:"A",controller:["$scope","$element",function(a,b){var c=$(b),d=c.find(".language-trigger");d.each(function(){$(this).data("language")&&$(this).attr("href",window.location.pathname+"?lang="+$(this).data("language"))})}],link:function(){}}}),angular.module("jpmorganApp").directive("homepagesearch",["$rootScope",function(a){return{restrict:"A",controller:["$scope",function(b){b.autocompleteSelection=!1,b.initialSearchDone=!1,b.autocompleteSelectionId="",b.$on("autocompleteSelected",function(c,d){a.safeApply(function(){b.initialSearchDone=!0,b.autocompleteSelection=d.autocompleteValue,b.autocompleteSelectionId=d.autocompleteId})}),b.$on("resetautocompleteSelected",function(){a.safeApply(function(){b.initialSearchDone||(b.autocompleteSelection=!1,b.autocompleteSelectionId="")})}),b.$on("locationSelected",function(c,d){a.safeApply(function(){b.locationSelected=d.locationValue})}),b.$on("usertypeSelected",function(c,d){a.safeApply(function(){b.usertypeSelected=d.usertypeValue})}),b.init=function(){},b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("map",["$rootScope","$timeout",function(a,b){return{templateUrl:"views/_modules/map.html",restrict:"A",scope:{zoom:"@",locations:"="},compile:function(a,b){b.zoom||(b.zoom=16)},controller:["$scope",function(c){!isNaN(c.zoom)&&c.zoom||(c.zoom=16),c.totalMarkersAdded=0,c.refresh=!1,c.markers=[],c.LatLngList=[],c.googleMap={},c.mapStyle=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"},{saturation:-100},{lightness:20}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"simplified"},{saturation:-60},{lightness:10}]},{featureType:"landscape.natural",elementType:"all",stylers:[{visibility:"simplified"},{saturation:-60},{lightness:60}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{saturation:-100},{lightness:60}]},{featureType:"road",elementType:"all",stylers:[{visibility:"on"},{saturation:-100},{lightness:40}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},{saturation:-100},{lightness:60}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{saturation:-10},{lightness:30}]}],c.mapSets={control:{},options:{disableDefaultUI:!1,draggable:!1,panControl:!1,overviewMapControl:!1,zoomControl:!1,streetViewControl:!1,scaleControl:!1,rotateControl:!1,scrollwheel:!1,mapTypeControl:!1,disableDoubleClickZoom:!0,keyboardShortcuts:!1,styles:c.mapStyle}},c.markerSets={draggable:!1,clickable:!1,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAA2CAMAAACYwMs6AAABs1BMVEXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXfMiXgOi7hPjLhQTXiQjbiQzfiRjrkU0jlVUvlWU/nY1nqe3PukInuk4zvmZLwn5jwn5nxo57xpJ7xpZ/zr6r0ubX0urX0u7b1wLz1wb31wr72xMH2xcH409D41NH64uD++fn//v7///9/38jBAAAAbnRSTlMAAQMFBgoLDA8SFBUXGRsgISIkJSYoKissLTc4OTtCREhJS05RU1daXF1eYGNnaW1ucXJzeoKFh4ySlpicn6Ckpamtr7CxsrW5uru9vsDBwsPExsrLzM7P1d3e4OTl5+vs7fDy8/T19/n6+/z9/lwQtEgAAAGvSURBVHgBjdP5V01RHAXwfS+JHmUeiMyDzLNEJY/MCmV+9ZDr9dpFUeaByED3T9YbnO+5955zXp+f91rfffZaB7q63S3dvcGTzPWTjQtg5G2+Mkhl4FwDklZ3M+byCkT5R/NMCPZ70MzpoFHrLChVnbRo99WtNK2aUHaIDo0oWpmjw6NaFFyiUwsANNAtvxRAmrrxj5Pf3o3Fu9cEFKM/woKpL8MUfbOxneLZn7Ds1xDFOjRTfA2VDxSHcYPKiykJ/X1OJY0sldeh5hWVW6D4HGreUnkwk1AWAZU3lnN3cJvKS734CJUutFFMmCdowj6KETXm7yGKrVhIzejPUmZimOLpXKCHuvFPk9/fj1HXAeAAK9gBIBXQKVsFAG10Oo6CNXTJL0ZRFx3OoGQjHepR4t2k1QX8t4lWa6Fco8VZiPpBGg0sh+Y0jZqhW5ajQX8tIk7Q4AiiUn1MuFeNmD1M2IY4v4cxVz0Iywy5VTA4xYhjMKnJUHO3GkY7qVkPi/NUWmGzqJ9lvSlYHZQfYud3sqgdLksec1pmPpz2ctoWuHkX5WV2dQ/vz0NFuzYg7h8EPTRrKHg2tQAAAABJRU5ErkJggg=="},c.geocode=function(a,b){var d=new google.maps.Geocoder;d.geocode({address:a.address},function(a,d){if(d===google.maps.GeocoderStatus.OK&&a.length>0){var e=a[0].geometry.location;c.addMarker(b,e.lat(),e.lng())}})},c.addMarker=function(a,b,d){c.LatLngList.push(new google.maps.LatLng(b,d)),c.markers.push({id:a,coords:{latitude:b,longitude:d},options:c.markerSets}),c.totalMarkersAdded++,c.totalMarkersAdded===c.locations.length&&c.renderMap()},c.renderMap=function(){1===c.LatLngList.length?c.mapSets.center={latitude:c.LatLngList[0].lat(),longitude:c.LatLngList[0].lng()}:c.mapSets.center={latitude:40.7560342,longitude:-73.9752793},c.mapSets.zoom=parseInt(c.zoom),a.safeApply(function(){c.refresh=!0,b(function(){c.mapInstance=c.googleMap.getGMap(),c.fitMarkersToMap(),c.navigateMap()},1)})},c.fitMarkersToMap=function(){if(c.LatLngList.length>1){for(var a=new google.maps.LatLngBounds,b=0;b<c.LatLngList.length;b++)a.extend(c.LatLngList[b]);c.mapInstance.fitBounds(a)}},c.navigateMap=function(){a.safeApply(function(){if(void 0!==c.markers[0]){var a=c.markers[0].coords.latitude,b=c.markers[0].coords.longitude;a&&b&&(c.navigateMapHref="http://maps.google.com/maps?q="+a+","+b+"&amp;ll=")}})},c.init=function(){var a;angular.forEach(c.locations,function(b,d){a=b,!a.lat||!a.lng&&a.address?c.geocode(a,d):a.lat&&a.lng&&c.addMarker(d,a.lat,a.lng)})},c.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}}),angular.module("jpmorganApp").directive("overlayTrigger",["$rootScope",function(a){return{restrict:"A",scope:{},controller:["$scope","$element","$attrs",function(b,c,d){var e=$(c),f=!1;b.overlayTriggerClicked=function(){f=!e.hasClass("active"),e.toggleClass("active"),a.$broadcast("overlayAction",{open:f,overlayId:d.overlayManaged})}}],link:function(a,b){b.bind("click",function(){a.overlayTriggerClicked()})}}}]),angular.module("jpmorganApp").directive("overlay",["$rootScope",function(a){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,c,d){
b.isOverlayVisible=function(b){return $.inArray(b,a.activeOverlayArr)!==-1},b.closeOverlay=function(b){a.$broadcast("overlayAction",{open:!1,overlayId:b}),$('[data-overlay-managed="'+b+'"]').removeClass("active")},a.$on("overlayAction",function(b,c){c.overlayId===d.id&&a.safeApply(function(){})})}],link:function(b,c,d){b.$on("$destroy",function(){a.$broadcast("overlayClosed",{overlayId:d.id})})}}}]),angular.module("jpmorganApp").directive("programs",["$http","$rootScope","$timeout",function(a,b,c){return{restrict:"A",controller:["$scope","$attrs","$element",function(d,e,f){var g=$(f);d.updateTriggered=!0,d.initialShowCount=d.showCount=6,d.cacheShowCount=d.showCount,d.initialized=!1,d.enableUpdateButton=!1,d.programsCount=d.cachedProgramsCount="",d.programFilter={},d.programFilter.typeSelection={},d.gridView=!1,b.$watch("deviceResolution",function(){"mobile"===b.deviceResolution?(d.gridView=!0,d.showCount=d.initialShowCount,d.cacheShowCount=d.showCount,g.find(".program-listing-container-wrapper").addClass("is-mobile")):g.find(".program-listing-container-wrapper").removeClass("is-mobile")}),d.$watch("updateTriggered",function(){d.initialized&&(d.showCount=d.initialShowCount,d.programFilter=d.programFilter)}),d.$watchCollection("programFilter",function(){d.initialized&&(d.enableUpdateButton=!0)}),d.$watchCollection("programFilter.typeSelection",function(){d.initialized&&(d.enableUpdateButton=!0)}),d.switchView=function(){d.gridView=!d.gridView,d.gridView?d.showCount=3*d.initialShowCount:d.showCount=d.cacheShowCount},d.getTypeDescription=function(a){return void 0!==d.typeDetailsArr[a]?d.typeDetailsArr[a]:""},d.sortByProgramName=function(a,b){if(d.checkIfJapanese(a.program_name)||d.checkIfJapanese(b.program_name)){if(d.checkIfJapanese(a.program_name)&&!d.checkIfJapanese(b.program_name))return-1;if(!d.checkIfJapanese(a.program_name)&&d.checkIfJapanese(b.program_name))return 1;if(d.checkIfJapanese(a.program_name)&&d.checkIfJapanese(b.program_name)){if(a.program_name.length<b.program_name.length)return-1;if(a.program_name.length>b.program_name.length)return 1}}else{if(a.program_name.toLowerCase()<b.program_name.toLowerCase())return-1;if(a.program_name.toLowerCase()>b.program_name.toLowerCase())return 1}return 0},d.sortByJapanese=function(a,b){if(d.checkIfJapanese(a)||d.checkIfJapanese(b)){if(d.checkIfJapanese(a)&&!d.checkIfJapanese(b))return-1;if(!d.checkIfJapanese(a)&&d.checkIfJapanese(b))return 1;if(d.checkIfJapanese(a)&&d.checkIfJapanese(b)){if(a.length<b.length)return-1;if(a.length>b.length)return 1}}else{if(a.toLowerCase()<b.toLowerCase())return-1;if(a.toLowerCase()>b.toLowerCase())return 1}return 0},d.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},d.loadPrograms=function(e){a.get(e,{cache:!0}).success(function(a){b.safeApply(function(){$(".program-listing-container-wrapper").removeClass("loader center"),c(function(){d.programsList=a.Programs,d.programsList.sort(d.sortByProgramName),d.programsCount=d.programsList.length,d.cachedProgramsCount=d.programsList.length,d.typeDetailsArr=[],angular.forEach(a.Types,function(a){d.typeDetailsArr[a.name]=a.description}),d.createFilters(a.Programs)},300)}),c(function(){var a=d.getParameterByName("type");a&&b.safeApply(function(){d.initialized=!0,d.openFilter="programtype",d.programFilter.typeSelection[d.getParameterByName("type")]=!0,d.updateTriggered=!0,d.programFilter=d.programFilter})},200)}).error(function(){})},d.updateType=function(){b.safeApply(function(){d.programFilter=d.programFilter})},d.resetFilters=function(){$(".filter-wrappers input").removeAttr("disabled"),$(".filter-wrappers input:checked").removeAttr("checked"),$(".dropdown-filter-triggers-wrapper .dropdown-filter-trigger .badge").text(0).removeClass("active"),d.programFilter={},d.showCount=d.cacheShowCount},d.incrementShowCount=function(){d.gridView?d.showCount+=3*d.initialShowCount:(d.showCount+=d.initialShowCount,d.cacheShowCount=d.showCount)},d.updateBadge=function(a){var b=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input:checked"),c=$(".dropdown-filter-triggers-wrapper").find("[data-open='"+d.openFilter+"']"),e=c.find(".badge");if("location"===d.openFilter){var f=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.country-checkbox:checked").length,g=$(a).parents(".filter-wrappers").find("[data-filter-content='"+d.openFilter+"'] input.region-checkbox:checked").length;f>0?e.text(f):e.text(g)}else e.text(b.length);b.length>0?e.addClass("active"):e.removeClass("active")},d.updateFilters=function(a){b.$broadcast("back-to-default-state");var c=[];$.each(d.programFilter,function(a,b){$.each(b,function(a,b){b&&c.push(a)})}),b.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:c.join()});var e=$(a.target);return d.updateBadge(e),d.updateTriggered=!0,!1},d.innerFilterAction=function(a){if(0===a.length)return!0;var b=!1;return $.each(a,function(a,c){if(c)return b=!0,!0}),b},d.filterAction=function(a){if(d.openFilter&&d.updateBadge(g.find(".update-filter-page")),d.updateTriggered){var b=[];if(d.programFilter.regionSelection){var c=[];angular.forEach(d.programFilter.regionSelection,function(b,d){if(b){var e=!1;angular.forEach(a.locations,function(a){a.region.toLowerCase()===d.toLowerCase()&&(c.push(!0),e=!0)}),e||c.push(!1)}}),d.innerFilterAction(c)?b.push(!0):b.push(!1)}if(d.programFilter.countrySelection){var e=[];angular.forEach(d.programFilter.countrySelection,function(b,c){if(b){var d=!1;angular.forEach(a.locations,function(a){a.country.toLowerCase()===c.toLowerCase()&&(e.push(!0),d=!0)}),d||e.push(!1)}}),d.innerFilterAction(e)?b.push(!0):b.push(!1)}if(d.programFilter.typeSelection){var f=[];angular.forEach(d.programFilter.typeSelection,function(b,c){b&&(a.program_type.toLowerCase()===c.toLowerCase()?f.push(!0):f.push(!1))}),d.innerFilterAction(f)?b.push(!0):b.push(!1)}if(d.programFilter.divisionSelection){var h=[];angular.forEach(d.programFilter.divisionSelection,function(b,c){if(b){var d=!1;angular.forEach(a.divisions,function(a){a.toLowerCase()===c.toLowerCase()&&(h.push(!0),d=!0)}),d||h.push(!1)}}),d.innerFilterAction(h)?b.push(!0):b.push(!1)}if(d.programFilter.levelSelection){var i=[];angular.forEach(d.programFilter.levelSelection,function(b,c){if(b){var d=!1;angular.forEach(a.program_level,function(a){a.toLowerCase()===c.toLowerCase()&&(i.push(!0),d=!0)}),d||i.push(!1)}}),d.innerFilterAction(i)?b.push(!0):b.push(!1)}var j=!1;return b.length>0?b.every(Boolean)&&(j=!0):j=!0,!!j}return!0},d.isRegionSelected=function(){var a=!1;return angular.forEach(d.programFilter.regionSelection,function(b){b&&(a=!0)}),!!a},d.checkIfCountryInRegion=function(a){var b=!0,c=!1;return d.programFilter.regionSelection&&angular.forEach(d.programFilter.regionSelection,function(e,f){e&&(c=!0,$.inArray(a.toString(),d.regionCountryArr[f])>-1&&(b=!1))}),b!==!1&&c&&(b=!0),d.programFilter.countrySelection&&void 0!==d.programFilter.countrySelection[a]&&b&&(d.programFilter.countrySelection[a]=!1),b},d.createFilters=function(a){var b=[],c=[],e=[],f=[],g=[],h=[];angular.forEach(a,function(a){a.program_level.length>0&&angular.forEach(a.program_level,function(a){b.push(a)}),a.program_type.length>0&&c.push(a.program_type),a.divisions.length>0&&angular.forEach(a.divisions,function(a){e.push(a)}),a.locations.length>0&&angular.forEach(a.locations,function(a){a.region.length>0&&f.push(a.region),a.country.length>0&&g.push(a.country),a.region.length>0&&a.country.length>0&&(void 0===h[a.region]&&(h[a.region]=[]),h[a.region].push(a.country),h[a.region]=h[a.region].unique())})}),d.levelArr=b.unique().sort(d.sortByJapanese),d.typeArr=c.unique().sort(d.sortByJapanese),d.divisionArr=e.unique().sort(d.sortByJapanese),d.regionArr=f.unique().sort(d.sortByJapanese),d.countryArr=g.unique().sort(d.sortByJapanese),d.regionCountryArr=h.sort(d.sortByJapanese)},d.formatHref=function(a){if(void 0===a)return"#";if(a&&a.length>0){var b=a.match(/href="([^"]*)/);return b?a.match(/href="([^"]*)/)[1]:a}return"#"},d.listLocations=function(a){var b=[];return angular.forEach(a,function(a){b.push(a.country)}),b.join(", ")},d.getParameterByName=function(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null},d.init=function(){c(function(){d.initialized=!0},200),d.loadPrograms(e.url)},d.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("pushDownTrigger",["$http","$rootScope","$timeout",function(a,b,c){return{restrict:"A",scope:{contentElem:"@",carouselGoToSlide:"@"},controller:["$scope","$element",function(d,e){d.cacheHeight=$(d.contentElem).height();var f="push-down-wrapper",g="is-active",h="push-down-active",i=$(e),j=400,k="easeInOutExpo";b.$on("back-to-default-state",function(){d.closeAction()}),d.closeAction=function(){$(d.contentElem).find(".module.push-down").slideToggle(j,k,function(){$(d.contentElem).removeClass(h).find("."+g).removeClass(g),c(function(){b.safeApply(function(){b.pushDownWrapperContent=""}),$(d.contentElem).height(d.cacheHeight),$(d.contentElem).find("."+f).html(""),$(d.contentElem).find(".push-down-wrapper").removeClass("is-active")},10)})},d.loadPushDownContent=function(e){a.get(e,{cache:!0}).success(function(a){$(d.contentElem).find("."+g).removeClass(g),i.addClass(g),$(d.contentElem).addClass(h),b.safeApply(function(){b.pushDownWrapperContent=a,b.pushDownGoToSlide=d.carouselGoToSlide,b.selectedPushDropDownSlide=d.carouselGoToSlide,b.selectedPushDropDownContentEl=d.contentElem}),c(function(){$(d.contentElem).find(".push-down-wrapper").addClass("is-active"),$(d.contentElem).find(".module.push-down").slideToggle(j,k,function(){0!==$(d.contentElem).find(".push-down-wrapper").height()&&$(d.contentElem).height($(".push-down-wrapper").height())})},50)}).error(function(){})},d.clickAction=function(a){a.preventDefault();var b=i.data("url");return i.data("close-action")?(d.closeAction(),!1):0!==b.length&&(i.hasClass(g)?(d.closeAction(),!1):(d.loadPushDownContent(b),!1))}}],link:function(a,b){b.bind("click",function(b){a.clickAction(b)})}}}]),angular.module("jpmorganApp").directive("refreshContent",["$http","$compile","$rootScope",function(a,b,c){return{restrict:"A",scope:{locationval:"=",autocompleteval:"=",loadOnPageLoad:"="},controller:["$scope","$element",function(d,e){var f=$(e);d.stringToURLFriendlySlug=function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},d.urlify=function(a,b){var c="";for(var d in a)""!==c&&(c+="&"),c+=b?d+"="+encodeURIComponent(a[d]):encodeURIComponent(a[d]);return c},d.getRefreshContentUrl=function(a){var b=$("body").data("has-url-params"),c=f.data("refresh-url"),e=f.data("original-url"),g=c;return g+=b===!0?"?"+d.urlify(a,!0):"/"+d.urlify(a,!1),e&&(g=c),g},d.loadContent=function(g){a.get(g,{cache:!0}).success(function(a){f.html(a),b(e.contents())(d),c.$broadcast("lazyload")}).error(function(){})},d.init=function(){d.$watch("locationval",function(a){a&&d.loadContent(d.getRefreshContentUrl({location:a}))}),d.$watch("autocompleteval",function(a){a&&d.loadContent(d.getRefreshContentUrl({query:a}))}),d.$watch("loadOnPageLoad",function(a){a&&d.loadContent(d.getRefreshContentUrl({query:a}))})},d.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("subMenu",["$rootScope",function(a){return{scope:!0,restrict:"EA",template:'<a id="{{item.id}}" href="" data-show-element="{{item.element_id}}">{{item.title}}</a>',link:function(b,c,d){b.$last&&a.$broadcast("subMenuLoaded")}}}]),angular.module("jpmorganApp").directive("tabs",["$http","$timeout","$location","$window","$rootScope",function(a,b,c,d,e){return{restrict:"A",controller:["$scope","$element",function(b,c){b.inlineData=$(c).data("inline-data");var f=$(c).find(".tabs li"),g=$(c).find(".tabs li > a"),h=g.parent().find(".active").data("url"),i=$(".tabs-header");i.text(g.parent().find(".active").text());var j,k=$(c).find(".grid-contents"),l=k.data("animation"),m=d.location.hash.replace(/\/|#/g,"");b.gridContentHtml="",b.divToShow="",m.length>0&&(j=g.parent().find("#"+m)),b.loadContent=function(c){a.get(c,{cache:!0}).success(function(a){b.gridContentHtml=a,k.addClass("animated "+l),e.$broadcast("lazyload"),k.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){k.removeClass("animated "+l)})}).error(function(){})},b.init=function(){g.on("click",function(a){a.preventDefault();var d=$(this);if(d.hasClass("is-active")||d.parent().hasClass("active"))return!1;if("#"===d.attr("href"),d.hasClass("dropdown-filter-trigger")&&d.hasClass("is-active")||(f.removeClass("active"),d.parent("li").addClass("active")),e.$broadcast("track",{trackName:"switchTab",setVar:"tab",setVarVal:d.text()}),$(c).not(".location_hub_nav").removeClass("tabs-active"),i.text(d.text()),b.inlineData){var g=d.data("show-element");e.safeApply(function(){b.divToShow=g||b.divToShow,e.$broadcast("lazyload")})}else b.loadContent(d.data("url"));return!1}),i.on("click",function(a){return a.preventDefault(),$(c).toggleClass("tabs-active"),!1});var a=d.location.hash.length>0&&j.length;if(b.inlineData)if(a)j.first().trigger("click");else{var k=$(c).find(".active a").data("show-element");i.text($(c).find(".active a").text()),e.safeApply(function(){b.divToShow=k,e.$broadcast("lazyload")})}else a?j.first().trigger("click"):b.loadContent(h)},b.init(),e.$on("subMenuLoaded",function(){f=$(c).find(".tabs li"),g=$(c).find(".tabs li > a"),g.on("click",function(a){a.preventDefault();var c=$(this);if(c.hasClass("is-active")||c.hasClass("active"))return!1;c.hasClass("dropdown-filter-trigger")&&c.hasClass("is-active")||(f.removeClass("active"),c.parent("li").addClass("active"));var d=c.data("show-element");e.safeApply(function(){b.divToShow=d||b.divToShow,e.$broadcast("lazyload")})})})}],link:function(){}}}]),angular.module("jpmorganApp").directive("taleo",function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,b,c){a.submit=function(b){if(b.preventDefault(),a.paramCount=0,a.isLocationSet=!1,a.moreSpecificLocation=!1,a.submitUrl=c.submitUrl+"?",a.taleoform.$valid){if($("html").attr("lang")?a.submitUrl+="lang=en":a.submitUrl+="lang=en",a.paramCount++,"object"!=typeof a.taleoform.keyword&&void 0!==a.taleoform.keyword&&a.taleoform.keyword.length>0){a.paramCount>0&&(a.submitUrl+="&");var d=/^\d+$/.test(a.taleoform.keyword);d?a.submitUrl+="jobNumberSearch="+a.taleoform.keyword:a.submitUrl+="keyword="+a.taleoform.keyword,a.paramCount++}"object"!=typeof a.taleoform.jobfield1&&void 0!==a.taleoform.jobfield1&&a.taleoform.jobfield1.length>0&&"default"!==a.taleoform.jobfield1&&(a.paramCount>0&&(a.submitUrl+="&"),a.submitUrl+="jobfield1="+a.taleoform.jobfield1,a.paramCount++),"object"!=typeof a.taleoform.selectedCity&&void 0!==a.taleoform.selectedCity&&a.taleoform.selectedCity.length>0&&"default"!==a.taleoform.selectedCity&&(a.paramCount>0&&(a.submitUrl+="&"),a.submitUrl+="location="+a.taleoform.selectedCity,a.paramCount++,a.isLocationSet=!0,a.moreSpecificLocation=!0),"object"!=typeof a.taleoform.selectedState&&void 0!==a.taleoform.selectedState&&a.taleoform.selectedState.length>0&&!a.moreSpecificLocation&&"default"!==a.taleoform.selectedState&&(a.paramCount>0&&(a.submitUrl+="&"),a.submitUrl+="location="+a.taleoform.selectedState,a.paramCount++,a.isLocationSet=!0,a.moreSpecificLocation=!0),"object"!=typeof a.taleoform.selectedCountry&&void 0!==a.taleoform.selectedCountry&&a.taleoform.selectedCountry.length>0&&!a.moreSpecificLocation&&"default"!==a.taleoform.selectedCountry&&(a.paramCount>0&&(a.submitUrl+="&"),a.submitUrl+="location="+a.taleoform.selectedCountry,a.paramCount++,a.isLocationSet=!0)}var e=window.open(a.submitUrl,"_blank");return e.focus(),!1},a.init=function(){a.taleoform={keyword:"",jobfield1:"default",selectedState:"",selectedCity:""}},a.init()}],link:function(){}}}),angular.module("jpmorganApp").directive("toggleAccordion",["$timeout",function(a){return{restrict:"A",controller:["$scope","$element",function(b,c){var d=$(c).find(".toggle-accordion-trigger"),e=$(c).find(".toggle-accordion-content"),f=800,g=400;b.init=function(){var b;d.on("click",function(c){return c.preventDefault(),d.toggleClass("active"),d.hasClass("active")?(b=f,d.html(d.data("close-text"))):(b=g,a(function(){d.html(d.data("open-text"))},450)),e.slideToggle(b).toggleClass("active"),!1})},b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("tracking",["$rootScope",function(a){return{restrict:"A",controller:["$scope",function(b){b.init=function(){a.$on("track",function(a,b){"undefined"!=typeof _satellite&&(_satellite.setVar(b.setVar,b.setVarVal),b.setVarValTwo&&b.setVarTwo&&_satellite.setVar(b.setVarTwo,b.setVarValTwo),_satellite.track(b.trackName))})},b.init()}],link:function(){}}}]),angular.module("jpmorganApp").directive("utilities",["$rootScope","$timeout","$window",function(a,b,c){return{restrict:"A",controller:["$scope",function(d){var e=$(window),f=e.width(),g=e.height(),h="mobile",i=!0;a.safeApply=function(a){var b=this.$root.$$phase;"$apply"===b||"$digest"===b?a&&"function"==typeof a&&a():this.$apply(a)},d.init=function(){a.activeOverlayArr=[],a.hover=!1,$("#prog-details-welcome-apply__a").on("click",function(a){return a.preventDefault(),$("html, body").animate({scrollTop:$("#prog-details-programs").offset().top+25},"1000","easeInOutExpo",function(){}),!1}),$(".hero__cta.open-program").on("click",function(a){return a.preventDefault(),$("html, body").animate({scrollTop:$("#prog-details-available-programs").offset().top+25},"1000","easeInOutExpo",function(){}),!1}),$(document).keyup(function(b){27===b.keyCode&&a.$broadcast("back-to-default-state")}),a.$on("overlayAction",function(b,c){c.open?a.activeOverlayArr.push(c.overlayId):a.activeOverlayArr.splice($.inArray(c.overlayId,a.activeOverlayArr),1),a.activeOverlayArr=a.activeOverlayArr.unique(),a.activeOverlayArr.length>0?$("body").addClass("is-hover-active"):$("body").removeClass("is-hover-active")}),a.$on("overlayClosed",function(b,c){a.activeOverlayArr.splice($.inArray(c.overlayId,a.activeOverlayArr),1),a.activeOverlayArr=a.activeOverlayArr.unique(),a.activeOverlayArr.length>0?$("body").addClass("is-hover-active"):$("body").removeClass("is-hover-active")}),a.$watch("deviceResolution",function(){i?b(function(){i=!1}):a.$broadcast("lazyload")}),a.$on("lazyload",function(){b(function(){d.lazyLoad(),$("img.lazy").trigger("bttrlazyloading.load")},0)}),e.on("resize",function(){f=$(this).width(),g=$(this).height();var b=!1;f<768?h="mobile":f>=768&&f<1024?h="tablet":f>=992&&(h="desktop"),f>=768&&f<1024&&(b=!0),a.safeApply(function(){a.deviceResolution=h,a.isTablet=b}),a.isLandscape=!1,f>g&&(a.isLandscape=!0)}),d.lazyLoad()},d.lazyLoad=function(){$("img.lazy").bttrlazyloading({threshold:666,backgroundcolor:"transparent",updatemanually:!0,retina:!0})},d.detectIE=function(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");if(b>0)return parseInt(a.substring(b+5,a.indexOf(".",b)),10);var c=a.indexOf("Trident/");if(c>0){var d=a.indexOf("rv:");return parseInt(a.substring(d+3,a.indexOf(".",d)),10)}var e=a.indexOf("Edge/");return e>0&&parseInt(a.substring(e+5,a.indexOf(".",e)),10)},d.init(),e.resize(),c.playerArr=[],c.playerTrackingArr=[],$("img.lazy").trigger("bttrlazyloading.load")}],link:function(){}}}]),angular.module("jpmorganApp").directive("video",["$timeout","$window","$rootScope",function(a,b,c){return{restrict:"A",compile:function(a,b){b.width||(b.width="100%"),b.height||(b.height="100%"),b.autoplay||(b.autoplay=!1)},controller:["$scope","$element","$attrs",function(d,e,f){$(e);d.width=f.width,d.height=f.height,d.autoplay=f.autoplay,d.videoid=f.videoid,c.triggerCaught=!1,c.endTriggerCaught=!1;var g;d.trackMilestone=function(a,b){c.$broadcast("track",{trackName:"milestone"+a,setVar:"videoId",setVarVal:b})},d.trackLogic=function(a,c,e){c>=.25&&c<.5?b.playerTrackingArr[a][25]===!1&&(d.trackMilestone(25,e),b.playerTrackingArr[a][25]=!0):c>=.5&&c<.75?b.playerTrackingArr[a][50]===!1&&(d.trackMilestone(50,e),b.playerTrackingArr[a][50]=!0):c>=.75&&c<1&&b.playerTrackingArr[a][75]===!1&&(d.trackMilestone(75,e),b.playerTrackingArr[a][75]=!0)},d.initVideoPlayer=function(){var e;$(".brightcove-video").each(function(f){var h=$(this);videojs($(this).attr("id")).on("ready",function(){e=this,b.playerArr[h.attr("id")]=e,b.playerTrackingArr[h.attr("id")]={25:!1,50:!1,75:!1},e.on("ended",function(b){return c.endTriggerCaught!==!0&&(c.endTriggerCaught=!0,a(function(){c.endTriggerCaught=!1},50),void d.trackMilestone(100,b.target.id))}),e.on("progress",function(a){var c,e;g&&clearTimeout(g),g=setTimeout(function(){for(var f in b.playerArr)if(f===a.target.id){if(c=videojs(f),0===c.currentTime())return!1;e=c.currentTime()/c.duration(),d.trackLogic(f,e,a.target.id)}},0)}),e.on("pause",function(d){if(c.triggerCaught===!0)return!1;c.triggerCaught=!0,a(function(){c.triggerCaught=!1},50);var e;for(var f in b.playerArr)f===d.target.id&&(e=videojs(f).currentTime());c.$broadcast("track",{trackName:"pause",setVar:"videoId",setVarVal:d.target.id,setVarTwo:"viewTime",setVarValTwo:e})}),e.on("play",function(d){if(c.triggerCaught===!0)return!1;c.triggerCaught=!0,a(function(){c.triggerCaught=!1},50),c.$broadcast("track",{trackName:"play",setVar:"videoId",setVarVal:d.target.id});for(var e in b.playerArr)e!==d.target.id&&($("html").hasClass("ie9")||(videojs(e).pause(!0),videojs(e).seek(0)))}),"true"===d.autoplay&&a(function(){e.play()},250)})})},d.isFunction=function(a){var b={};return a&&"[object Function]"===b.toString.call(a)},d.loadVideoScript=function(){$.getScript("//players.brightcove.net/1139173452001/a6771937-047d-4f5f-88e6-a697b37b5456_default/index.min.js").done(function(){a(function(){d.initVideoPlayer()},50)}).fail(function(){})},d.init=function(){d.loadVideoScript()},d.init()}],link:function(){}}}]),angular.module("jpmorganApp").factory("countrySynonyms",[function(){var a=function(){function a(){this.countrySynonyms=[]}return a.prototype={getSynonyms:function(){return this.countrySynonyms}},a}();return new a}]),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()),angular.module("MassAutoComplete",[]).directive("massAutocomplete",["$timeout","$window","$document","$q",function(a,b,c,d){return{restrict:"A",scope:{options:"&massAutocomplete"},transclude:!0,template:'<span ng-transclude></span><div class="ac-container" ng-show="show_autocomplete && results.length > 0" style="position:absolute;"><ul class="ac-menu"><li ng-repeat="result in results" ng-if="$index > 0" class="ac-menu-item" ng-class="$index == selected_index ? \'ac-state-focus\': \'\'"><a ng-click="apply_selection($index)" ng-bind-html="result.label"></a></li></ul></div>',link:function(a,b){a.container=angular.element(b[0].getElementsByClassName("ac-container")[0])},controller:["$scope",function(e){function f(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function g(){var a=m[0].getBoundingClientRect(),d=c[0].body.scrollTop||c[0].documentElement.scrollTop||b.pageYOffset,f=c[0].body.scrollLeft||c[0].documentElement.scrollLeft||b.pageXOffset,g=e.container[0];g.style.top=a.top+a.height+d+"px",g.style.left=a.left+f+"px",g.style.width=a.width+"px"}function h(a,b,d){m!==b&&(m&&s.detach(),b[0]===c[0].activeElement&&(d.on_attach&&d.on_attach(),m=b,n=a,o=d,p=a.$viewValue,e.results=[],e.selected_index=-1,l(),q=e.$watch(function(){return a.$modelValue},function(a,b){a!==r&&(g(),y(a,m))})))}function i(a,b){e.selected_index=0,e.waiting_for_suggestion=!0,"string"==typeof a&&a.length>0?d.when(o.suggest(a),function(c){m&&m===b&&(c&&c.length>0?(e.results=[{value:a,label:""}].concat(c),e.show_autocomplete=!0,o.auto_select_first&&k(1)):e.results=[])},function(a){e.show_autocomplete=!1,o.on_error&&o.on_error(a)}).finally(function(){e.waiting_for_suggestion=!1}):(e.waiting_for_suggestion=!1,e.show_autocomplete=!1,e.$apply())}function j(a){n.$modelValue!==a&&(n.$setViewValue(a),n.$render())}function k(a){var b=e.results[a];return m.val(b.value),e.selected_index=a,b}function l(){angular.element(b).bind(u.RESIZE,x),m.bind(u.BLUR,function(){a(function(){m&&m[0]===c[0].activeElement||s.detach()},w.debounce_blur)}),m.bind(u.KEYDOWN,function(a){if(!a.shiftKey)switch(a.keyCode){case t.ESC:e.show_autocomplete?(e.show_autocomplete=!1,e.$apply()):m.val(p);break;case t.ENTER:e.show_autocomplete&&e.selected_index>0&&!e.waiting_for_suggestion&&(e.apply_selection(e.selected_index),a.stopPropagation(),a.preventDefault()),e.show_autocomplete=!1,e.$apply();break;case t.TAB:if(!e.show_autocomplete)break;a.preventDefault();case t.DOWN:e.results.length>0&&(e.show_autocomplete?k(e.selected_index+1>e.results.length-1?0:e.selected_index+1):(e.show_autocomplete=!0,e.selected_index=0),e.$apply());break;case t.UP:e.show_autocomplete&&(a.preventDefault(),k(e.selected_index-1>=0?e.selected_index-1:e.results.length-1),e.$apply())}})}var m,n,o,p,q,r,s=this,t={TAB:9,ESC:27,ENTER:13,UP:38,DOWN:40},u={KEYDOWN:"keydown",RESIZE:"resize",BLUR:"blur"},v=e.options()||{},w={debounce_position:v.debounce_position||150,debounce_attach:v.debounce_attach||300,debounce_suggest:v.debounce_suggest||200,debounce_blur:v.debounce_blur||150};e.show_autocomplete=!1;var x=f(g,w.debounce_position);s.attach=f(h,w.debounce_attach);var y=f(i,w.debounce_suggest);s.detach=function(){if(m){var a=m.val();j(a),o.on_detach&&o.on_detach(a),m.unbind(u.KEYDOWN),m.unbind(u.BLUR)}e.show_autocomplete=!1,angular.element(b).unbind(u.RESIZE),q&&q(),e.selected_index=e.results=void 0,n=m=p=void 0},e.apply_selection=function(a){if(m[0].focus(),!(!e.show_autocomplete||a>e.results.length||a<0)){var b=k(a);r=b.value,j(b.value),e.show_autocomplete=!1,o.on_select&&o.on_select(b)}},e.$on("$destroy",function(){s.detach(),e.container.remove()})}]}}]).directive("massAutocompleteItem",function(){return{restrict:"A",require:["^massAutocomplete","ngModel"],scope:{massAutocompleteItem:"&"},link:function(a,b,c,d){c.$set("autocomplete","off"),b.bind("focus",function(){var c=a.massAutocompleteItem();if(!c)throw"Invalid options";d[0].attach(d[1],b,c)})}}}),angular.module("jpmorganApp").factory("availProgramsLoad",["$rootScope","load","programDateUtil",function(a,b,c){var d=function(){function a(a,b){this.OP_FETCH_AVAILABLE_PROGRAMS="fetch-available-programs",this.selector=a,this.dataUrl=b,this.markers={},this.programsData={},this.data={},this.init()}return a.prototype={handleUrlResponse:function(a,d,e){var f=e.parent;switch(e.opId){case f.OP_FETCH_AVAILABLE_PROGRAMS:f.programsData=a&&d.status.success?d.response.Programs:{},f.markers.programsLoaded=!0,b.removeLoadingIcon(f.selector);var g=[],h=[],i=[],j=[],k=0,l=0,m=0;angular.forEach(f.programsData,function(a,b){if(a.end_date){a.isOpen=!0,a.deadline=c.parseExpiryDate(a.end_date),m++,a.application_url&&a.application_url.length>0&&(a.hasApplyNowLink=!0),void 0!==a.program_level&&"graduate"===a.program_level?(j.push(a),k++,g.push(a.region),h.push(a.region)):void 0!==a.program_level&&"experienced"===a.program_level&&(j.push(a),l++,g.push(a.region),i.push(a.region));var d="";angular.forEach(a.locations,function(a,b){d.length>0&&(d+=", "),d+=a}),a.locationcsv=d}}),f.data.programs=j,f.data.graduateProgramsCount=k,f.data.experiencedProgramsCount=l,f.data.openProgramsCount=m,f.data.regions=_.uniq(g).sort(),f.data.graduateRegions=_.uniq(h).sort(),f.data.experiencedRegions=_.uniq(i).sort()}},init:function(){var a=this;b.displayLoadingIcon(a.selector);var c={};c.parent=a,c.opId=a.OP_FETCH_AVAILABLE_PROGRAMS,a.markers.programsLoaded=!1,b.getJson(a.dataUrl,c,a.handleUrlResponse)}},a}();return function(a,b){return new d(a,b)}}]).directive("availableProgramsList",["$rootScope","availProgramsLoad",function(a,b){return{restrict:"E",controller:["$scope","$attrs","$element",function(c,d,e){var f=this;this.data=[],this.init=function(){c.metaData={},c.metaData.tabSelected="";var a=b(".loading-icon",d.url);f.data=a.data},this.setTab=function(a){"graduate"===a?($(".tab-experienced").removeClass("active"),$(".tab-graduate").addClass("active"),$(".tab-graduate").removeClass("close").addClass("open"),$(".tab-experienced").removeClass("open").addClass("close"),c.regions=f.data.graduateRegions):"experienced"===a&&($(".tab-graduate").removeClass("active"),$(".tab-experienced").addClass("active"),$(".tab-experienced").removeClass("close").addClass("open"),$(".tab-graduate").removeClass("open").addClass("close"),c.regions=f.data.experiencedRegions),c.regionFilterDisplay=f.isFilterToBeDisplayed(a),c.resetRegionFilter()},this.isFilterToBeDisplayed=function(a){var b=!1;return"graduate"===a?b=f.data.graduateProgramsCount>3&&f.data.regions.length>1:"experienced"===a&&(b=f.data.experiencedProgramsCount>3&&f.data.regions.length>1),b},c.hasFilterClass=function(a){return f.isFilterToBeDisplayed(a)?"with-filter":"without-filter"},c.displayLabel=function(a,b){return"str"===b?a:"obj"===b?a.label:""},c.$watch(function(){return c.metaData.gRegion},function(a,b){var c=a;void 0===c&&(c=$(".default-region-filter-label").html()),c='<i class="icon-arrow-down"></i>'+c,$(".graduate.region-filter.button").html(c)},!0),c.$watch(function(){return c.metaData.eRegion},function(a,b){var c=a;void 0===c&&(c=$(".default-region-filter-label").html()),c='<i class="icon-arrow-down"></i>'+c,$(".experienced.region-filter.button").html(c)},!0),c.$watch(function(){return c.metaData.region},function(a,b){var c=a;void 0===c&&(c=$(".default-region-filter-label").html()),c='<i class="icon-arrow-down"></i>'+c,$(".region-filter.button").html(c)},!0),c.$watch(function(){return f.data},function(b,d){(void 0!==f.data.programs||void 0!==f.data.regions)&&(c.programs=f.data.programs,c.regions=f.data.regions,f.setTab(c.metaData.tabSelected),c.graduateProgramsCount=$(".no-label").html(),f.data.graduateProgramsCount>0&&(c.graduateProgramsCount=f.data.graduateProgramsCount),c.experiencedProgramsCount=$(".no-label").html(),f.data.experiencedProgramsCount>0&&(c.experiencedProgramsCount=f.data.experiencedProgramsCount),$(".tab-experienced").hasClass("ignore-count")&&$(".tab-experienced .open-programs-label").addClass("capitalize"),c.graduateProgramsCount>0||c.experiencedProgramsCount>0||$(".tab-experienced").hasClass("ignore-count")?($("#hero__cta__open").addClass("fade-in"),$("#hero__cta__closed").removeClass("fade-in")):($("#hero__cta__open").removeClass("fade-in"),$("#hero__cta__closed").addClass("fade-in"),$(".table-footer-container .row").addClass("hide ng-hide")),f.data.graduateProgramsCount>0?c.metaData.tabSelected="graduate":(f.data.experiencedProgramsCount>0||$(".tab-experienced").hasClass("ignore-count"))&&(c.metaData.tabSelected="experienced"),"mobile"===a.deviceResolution?(f.setMobileSection("graduate","graduate"===c.metaData.tabSelected),f.setMobileSection("experienced","experienced"===c.metaData.tabSelected)):f.setTab(c.metaData.tabSelected))},!0),c.toggleTab=function(b){if("graduate"===c.metaData.tabSelected&&c.metaData.tabSelected!==b){var d=$(".tab-experienced").hasClass("ignore-count");(d||c.experiencedProgramsCount>0)&&(c.metaData.tabSelected=b)}else if("experienced"===c.metaData.tabSelected&&c.metaData.tabSelected!==b){var d=$(".tab-graduate").hasClass("ignore-count");(d||c.graduateProgramsCount>0)&&(c.metaData.tabSelected=b)}"mobile"===a.deviceResolution?f.setMobileSection(c.metaData.tabSelected):f.setTab(c.metaData.tabSelected)},this.closeSection=function(a){$(a).removeClass("open").addClass("close"),$(a+" .section-title .icon .icon-minus").addClass("hide"),$(a+" .section-title .icon .icon-plus").removeClass("hide"),$(a+" .section-content-wrapper").addClass("hide")},this.openSection=function(a){$(a).removeClass("close").addClass("open"),$(a+" .section-title .icon .icon-plus").addClass("hide"),
$(a+" .section-title .icon .icon-minus").removeClass("hide"),$(a+" .section-content-wrapper").removeClass("hide")},this.setMobileSection=function(a,b){"graduate"===a?$(".tab-graduate").hasClass("open")||b===!1?(f.closeSection(".tab-graduate"),c.graduateRegionFilterDisplay=!1):(0===f.data.graduateProgramsCount?f.closeSection(".tab-graduate"):f.openSection(".tab-graduate"),c.graduateRegionFilterDisplay=f.data.graduateProgramsCount>3&&f.data.regions.length>1,c.regions=f.data.graduateRegions):"experienced"===a?$(".tab-experienced").hasClass("close")||b===!0?(0!==f.data.experiencedProgramsCount||$(".tab-experienced").hasClass("ignore-count")?f.openSection(".tab-experienced"):f.closeSection(".tab-experienced"),c.experiencedRegionFilterDisplay=f.data.experiencedProgramsCount>3&&f.data.regions.length>1,c.regions=f.data.experiencedRegions):(f.closeSection(".tab-experienced"),c.experiencedRegionFilterDisplay=!1):(f.closeSection(".tab-graduate"),f.closeSection(".tab-experienced")),0===f.data.graduateProgramsCount&&$(".tab-graduate .section-title .icon").addClass("hide"),0!==f.data.experiencedProgramsCount||$(".tab-experienced").hasClass("ignore-count")||$(".tab-experienced .section-title .icon").addClass("hide"),c.resetRegionFilter()},c.formatMonthShort=function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b[a.getMonth()]},c.formatDateShort=function(a){var b=a.getDate();return 9>=b?"0"+b:b},c.formatYear=function(a){return a.getFullYear()},c.isTableEmpty=function(a){var b="";return(0===f.data.graduateProgramsCount&&"graduate"===a||0===f.data.experiencedProgramsCount&&"experienced"===a)&&(b+=" zero-count"),0===f.data.graduateProgramsCount&&0===f.data.experiencedProgramsCount&&(b+=" no-programs"),b},c.applicationUrl=function(a){var b=a.application_url;if(void 0===b)return"#";if(b&&b.length>0){var c=b.match(/href="([^"]*)/);return c?b.match(/href="([^"]*)/)[1]:b}return"#"},c.resetRegionFilter=function(){c.metaData.region=void 0,c.metaData.gRegion=void 0,c.metaData.eRegion=void 0;var a='<i class="icon-arrow-down"></i>'+$(".default-region-filter-label").html();$(".region-filter.button").html(a)},c.hasIndiaAsLocation=function(a){var b=$.inArray("India",a);return b>-1},c.hasExperiencedCTAMessage=function(){return 0===f.data.experiencedProgramsCount&&("experienced"===c.metaData.tabSelected||$(".tab-experienced").hasClass("open"))},this.init()}]}}]).filter("programsFilter",function(){return function(a,b,c,d){if(a){var e=[],f=!1;angular.forEach(a,function(a,c){var g=!0,h=b.region;g&&("ignore-tab-selected-only-graduate"===d?(h=b.gRegion,g="graduate"===a.program_level):"ignore-tab-selected-only-experienced"===d?(h=b.eRegion,g="experienced"===a.program_level):g=b.tabSelected===a.program_level),g&&h&&(g=a.region===h),g&&e.push(a),f=!0}),f?0===e.length&&$(".no-search-results").css("display","block"):$(".no-search-results").css("display","none");var g=[],h=0;return angular.forEach(e,function(a,b){h%2!==0||"even"!==c&&"all"!==c?h%2===0||"odd"!==c&&"all"!==c||g.push(a):g.push(a),h++}),f?g:a}}}).directive("moveHamburgerIcon",["$rootScope","$timeout",function(a,b){return{restrict:"A",controller:["$scope","$attrs","$element",function(a,c,d){$(document).ready(function(){b(function(){var a=0,b=$(d).find(".title");jQuery.each(b,function(b,c){var d=$(c).height();d>a&&(a=d)}),jQuery.each(b,function(b,c){$(c).css({height:a+"px"})});var c=$(".infographic-carousel .overlay-trigger"),e=a+37;jQuery.each(c,function(a,b){$(b).css({top:e+"px"})});var f=a+22,g=$(".overlay-info-box");jQuery.each(g,function(a,b){$(b).css({"margin-top":f+"px"})})},1e3)})}]}}]).directive("moveCarouselButtons",["$rootScope","$timeout",function(a,b){return{restrict:"A",controller:["$scope","$attrs","$element",function(a,c,d){$(document).ready(function(){b(function(){var a=0,b=$(d).find(".title");jQuery.each(b,function(b,c){var d=$(c).height();d>a&&(a=d)}),jQuery.each(b,function(b,c){$(c).css({height:a+"px"})});var c=$(d).find(".foot-note"),e=0;jQuery.each(c,function(a,b){var c=$(b).height();c>e&&(e=c)}),e+=25;var f=$(d).find(".owl-pagination");f.css({top:"-"+e+"px"});var g=231;g+=a,$(".infographic-carousel .owl-controls .owl-buttons .owl-next").css({top:g+"px"}),$(".infographic-carousel .owl-controls .owl-buttons .owl-prev").css({top:g+"px"})},1e3)})}]}}]),angular.module("jpmorganApp").factory("eventUtil",["$rootScope",function(a){var b=function(){function b(){}return b.prototype={isNotEmpty:function(a){return a&&a.length>0},replaceHtmlChars:function(a){return a.replace(/&amp;/g,"&")},shortText:function(a,b){var c="";return a.length>b?(c=a.slice(0,b).join(", "),c+=" ..."):c=a.join(", "),c},objectArrayDeepCopy:function(a){var b=[];return angular.forEach(a,function(a,c){b.push($.extend(!0,{},a))}),b},modelDataCopy:function(a){var b=this,c=[];return c.locations=b.objectArrayDeepCopy(a.locations),c.countries=[],c.types=b.objectArrayDeepCopy(a.types),c.selectedUnivs=b.objectArrayDeepCopy(a.selectedUnivs),c.universities=[],c.search=a.search,c},trimSpacesAndSpecialChars:function(a){var b=a.replace(/[ !@#\$%\^\&*\)\(+=._-]/gi,"").toLowerCase();return b},customAutocompleteMatch:function(a,b){var c=b.term,d=[];return angular.forEach(a,function(a,b){var e=!1;if(-1!==a.label.toLowerCase().indexOf(c)&&(e=!0),!e&&void 0!==a.synonyms&&a.synonyms.length>0&&angular.forEach(a.synonyms,function(a,b){-1!==a.toLowerCase().indexOf(c)&&(e=!0)}),!e&&void 0!==a.regex){var f=new RegExp(a.regex,"i");f.test(c)&&(e=!0)}e&&d.push(a)}),d},searchByContains:function(a,b){var c=!1;return void 0!==a&&a.length>0&&(c=-1!==a.toLowerCase().indexOf(b.toLowerCase())),c},sortByLabel:function(b,c){if(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b.label)||a.checkIfJapanese(c.label)){if(a.checkIfJapanese(b.label)&&!a.checkIfJapanese(c.label))return-1;if(!a.checkIfJapanese(b.label)&&a.checkIfJapanese(c.label))return 1;if(a.checkIfJapanese(b.label)&&a.checkIfJapanese(c.label)){if(b.label.length<c.label.length)return-1;if(b.label.length>c.label.length)return 1}}else{if(b.label.toLowerCase()<c.label.toLowerCase())return-1;if(b.label.toLowerCase()>c.label.toLowerCase())return 1}return 0},sortByJapanese:function(b,c){if(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b)||a.checkIfJapanese(c)){if(a.checkIfJapanese(b)&&!a.checkIfJapanese(c))return-1;if(!a.checkIfJapanese(b)&&a.checkIfJapanese(c))return 1;if(a.checkIfJapanese(b)&&a.checkIfJapanese(c)){if(b.length<c.length)return-1;if(b.length>c.length)return 1}}else{if(b.toLowerCase()<c.toLowerCase())return-1;if(b.toLowerCase()>c.toLowerCase())return 1}return 0},eventsSort:function(b,c){return b.startDate-c.startDate!==0?b.startDate-c.startDate:(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b.event_name)||a.checkIfJapanese(c.event_name)?a.checkIfJapanese(b.event_name)&&!a.checkIfJapanese(c.event_name)?-1:!a.checkIfJapanese(b.event_name)&&a.checkIfJapanese(c.event_name)?1:a.checkIfJapanese(b.event_name)&&a.checkIfJapanese(c.event_name)?b.event_name.length<c.event_name.length?-1:b.event_name.length>c.event_name.length?1:0:void 0:b.event_name.toLowerCase()<c.event_name.toLowerCase()?-1:b.event_name.toLowerCase()>c.event_name.toLowerCase()?1:0)}},b}();return new b}]).factory("eventDateUtil",[function(){var a=function(){function a(){}return a.prototype={parseDate:function(a){var b=null,c=a.split("/");return 3===c.length&&(b=new Date(c[2],c[1]-1,c[0])),b},formatTime:function(a){return a.replace(/ /g,"").toLowerCase()},parseDeadlineDate:function(a){var b=null,c=a.split(" ");if(c.length>1){var d=c[0].split("-");3===d.length&&(b=new Date(d[0],d[1]-1,d[2]))}return b},formatMonthShort:function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b[a.getMonth()]},formatDateShort:function(a){var b=a.getDate();return 9>=b?"0"+b:b},formatDeadlineDate:function(a){return this.formatMonthShort(a)+" "+this.formatDateShort(a)+", "+a.getFullYear()}},a}();return new a}]).factory("eventDataParser",["$rootScope","eventUtil","countrySynonyms",function(a,b,c){var d=function(){function a(a){this.eventsData=a,this.countries=[],this.types=[],this.universities=[],this.countrySynonyms=c.getSynonyms(),this.init()}return a.prototype={init:function(){var a=this;angular.forEach(a.eventsData,function(b,c){a.countries.push(b.country)}),a.countries=_.uniq(a.countries).sort(b.sortByJapanese),a.countries=a.prepareObjWithValue(a.countries),a.appendCountrySynonms(),angular.forEach(a.eventsData,function(c,d){a.types.push(b.replaceHtmlChars(c.event_classification))}),a.types=_.uniq(a.types).sort(b.sortByJapanese),a.types=a.prepareObjWithValue(a.types),angular.forEach(a.eventsData,function(c,d){a.universities.push(b.replaceHtmlChars(c.campus_name))}),a.universities=_.uniq(a.universities).sort(b.sortByJapanese),a.universities=a.prepareObjWithValue(a.universities)},appendCountrySynonms:function(){var a=this;angular.forEach(a.countries,function(c,d){angular.forEach(a.countrySynonyms,function(a,d){var e=b.trimSpacesAndSpecialChars(a.jpmlabel);c.value===e&&(c.synonyms=a.synonyms,c.regex=a.regex)})})},prepareObjWithValue:function(a){var c=[];return angular.forEach(a,function(a,d){var e={};e.label=a,e.value=b.trimSpacesAndSpecialChars(a),c.push(e)}),c},load:function(a,b){var c=[];switch(a){case"countries":c=this.countries;break;case"types":c=this.types;break;case"universities":c=this.universities}angular.forEach(c,function(a,c){b.push(a)})}},a}();return function(a){return new d(a)}}]).factory("eventLoad",["$rootScope","load","eventUtil","eventDateUtil","eventDataParser",function(a,b,c,d,e){var f=function(){function a(a,b){this.OP_FETCH_EVENTS="fetch-events",this.selector=a,this.eventUrl=b,this.markers={},this.eventsData={},this.events=[],this.countries=[],this.types=[],this.universities=[],this.init()}return a.prototype={handleUrlResponse:function(a,f,g){var h=g.parent;switch(g.opId){case h.OP_FETCH_EVENTS:h.eventsData=a&&f.status.success?f.response.Events:{},h.markers.eventsLoaded=!0,b.removeLoadingIcon(h.selector);var i=0;angular.forEach(h.eventsData,function(a,b){a.startDate=d.parseDate(a.date_start),a.eventMonth=d.formatMonthShort(a.startDate),a.eventDate=d.formatDateShort(a.startDate),a.endDate=d.parseDate(a.date_end),a.startTimeDisplay=d.formatTime(a.start_time),a.endTimeDisplay=d.formatTime(a.end_time),a.hasSignupLink=c.isNotEmpty(a.signup_link),a.hasDesc=c.isNotEmpty(a.external_description),a.hasDeadline=c.isNotEmpty(a.signup_deadline),a.hasDeadline&&(a.signupDeadlineDate=d.parseDate(a.signup_deadline),a.signupDeadlineDateDisplay=d.formatDeadlineDate(a.signupDeadlineDate)),a.hasDesc&&(a.external_description=c.replaceHtmlChars(a.external_description)),a.event_classification=c.replaceHtmlChars(a.event_classification),a.campus_name=c.replaceHtmlChars(a.campus_name),a.event_id=i++,a.style="eventtype",a.displayMode="minimize",h.events.push(a)}),h.events.sort(c.eventsSort);var j=e(h.events);j.load("countries",h.countries),j.load("types",h.types),j.load("universities",h.universities)}},init:function(){var a=this;b.displayLoadingIcon(a.selector);var c={};c.parent=a,c.opId=a.OP_FETCH_EVENTS,a.markers.eventsLoaded=!1,b.getJson(a.eventUrl,c,a.handleUrlResponse)}},a}();return function(a,b){return new f(a,b)}}]).directive("studentEvents",["$rootScope","$timeout","eventLoad","eventUtil",function(a,b,c,d){return{restrict:"E",controller:["$scope","$attrs","$element",function(d,e,f){var g=this;this.events=[],this.metaData=[],this.init=function(){var a=c(".loading-icon",e.url1);g.events=a.events,this.metaData.countries=a.countries,this.metaData.types=a.types,this.metaData.universities=a.universities,d.metaData=[],d.metaDataMobile=[]},d.getSelectedFilterEntries=function(a){var b=[];return angular.forEach(a,function(a,c){a.isSelected&&b.push(a.label)}),b},d.isMobile=function(){return"mobile"===a.deviceResolution},d.trackFilters=function(){var b=d.metaData;d.isMobile()&&(b=d.metaDataMobile);var c=[];c=c.concat(d.getSelectedFilterEntries(b.locations)),c=c.concat(d.getSelectedFilterEntries(b.types)),c=c.concat(d.getSelectedFilterEntries(b.selectedUnivs)),void 0!==b.search&&c.push("search:"+b.search),c.length>0&&a.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:c.join()})},this.prevSearch="",$(".search-input").unbind("keyup").bind("keyup",function(a){b(function(){var a="";a=d.isMobile()?d.metaDataMobile.search:d.metaData.search,g.prevSearch!==a&&(d.trackFilters(),g.prevSearch=a)},1e3)}),d.updateFiltersView=function(){var a=d.expandTF,b=[];if(a)b=g.metaData.types;else{var c=[];angular.forEach(d.metaData.types,function(a,b){a.isSelected&&c.push(a)}),b=c}d.metaData.types=b},this.init()}]}}]).directive("eventList",["$rootScope","$timeout",function(a,b){return{restrict:"A",require:"^studentEvents",link:function(b,c,d,e){var f={};f.events=e.events,b.eventList=f,$(document).on("click",".ical-link a",function(b){return a.$broadcast("track",{trackName:"iCal",setVar:"event",setVarVal:$(this).attr("eventname")}),!0}),b.format=function(a,b){var c;return"event-name"==b&&(c=a.event_name),c&&c.length>0?c:"#"},b.eventUrl=function(a,b){var c;if(c="ical"===b?a.ical_link:a.signup_link,void 0===c)return"#";if(c&&c.length>0){var d=c.match(/href="([^"]*)/);return d?c.match(/href="([^"]*)/)[1]:c}return"#"},b.eventId=function(a){return"pid"+a.event_id},b.expandEvent=function(a){var b="minimize";if(a.displayMode===b&&(b="maximize"),a.displayMode=b,"minimize"===b?($(".pid"+a.event_id+" .maximize").addClass("slideup").removeClass("slidedown"),$(".pid"+a.event_id+" .minimize").removeClass("slideup ng-hide").addClass("slidedown")):"maximize"===b&&($(".pid"+a.event_id+" .minimize").addClass("slideup ng-hide").removeClass("slidedown"),$(".pid"+a.event_id+" .maximize").removeClass("slideup").addClass("slidedown")),"maximize"!==b){var c=$(".pid"+a.event_id+" .description");c.animate({height:0},300,function(){c.html("")})}else{var c=$(".pid"+a.event_id+" .description"),d=$(".pid"+a.event_id+" .description-hidden"),e=d.outerHeight();c.css("height","0px"),c.html(d.html()),c.animate({height:e},500,function(){c.css("height","auto")})}}}}}]).directive("eventFilterByType",[function(){return{restrict:"A",require:"^studentEvents",link:function(a,b,c,d){a.$watch(function(){return d.metaData.types},function(){a.updateFiltersView(),a.trackFilters()},!0),a.expandTF=!1,a.updateTFView=function(b){void 0===b&&(b=!a.expandTF),a.expandTF=b,b&&(a.expandCF=!1,a.expandUF=!1),a.updateFiltersView()}}}}]).directive("eventFilterByLocation",["$timeout","eventUtil",function(a,b){return{restrict:"A",require:"^studentEvents",link:function(c,d,e,f){c.expandCF=!0,c.$watch(function(){return c.metaData.locations},function(a,d){var e=[],f=!1;angular.forEach(c.metaData.locations,function(a,d){if(a.isSelected)e.push(a);else{var g={};g.label=a.label,g.value=a.value,g.synonyms=a.synonyms,g.regex=a.regex,c.metaData.countries.push(g),c.metaData.countries.sort(b.sortByLabel),f=!0}}),c.metaData.locations=e,f||c.trackFilters()},!0),c.expandList=function(){$(".event-countries").focus()},c.$watch(function(){return f.metaData.countries},function(){function e(a,b){if(a&&a.length>0)for(var c,d,e,f=$.trim(a).toLowerCase(),g=b.get(0).firstChild;(c=g.data.toLowerCase().indexOf(f))>=0;)d=g.splitText(c),g=d.splitText(f.length),e=document.createElement("span"),e.className="highlight",g.parentNode.insertBefore(e,g),e.appendChild(d)}c.metaData.countries=f.metaData.countries,c.metaData.locations=[],d.find(".event-countries").autocomplete({source:function(a,d){d(b.customAutocompleteMatch(c.metaData.countries,a))},minLength:0,select:function(b,d){var e={};e.label=d.item.label,e.value=d.item.value,e.isSelected=!0,angular.forEach(c.metaData.countries,function(a,b){a.value===e.value&&(e.synonyms=a.synonyms,e.regex=a.regex)}),c.metaData.locations.push(e),c.$apply(),c.metaData.countries=jQuery.grep(c.metaData.countries,function(a){return a.value!==d.item.value}),a(function(){$(".event-countries").val(""),$(".event-countries").blur()},100)},open:function(a,b){$(".ui-autocomplete").off("menufocus hover mouseover mouseenter")}}).on("focus",function(){$(this).keydown();var a;c.metaData.countries.length>=3?a=99:c.metaData.countries.length>0&&(a=33*c.metaData.countries.length),$(this).animate({"margin-bottom":a},300,"swing")}).on("blur",function(){$(this).val(""),$(this).css("margin-bottom","20px")}).data("ui-autocomplete")._renderItem=function(a,b){var c=$("<a></a>").text(b.label);return e(this.term,c),$("<li></li>").append(c).appendTo(a)}},!0),c.updateCFView=function(a){void 0===a&&(a=!c.expandCF),c.expandCF=a,a&&(c.expandTF=!1,c.expandUF=!1),c.updateFiltersView()}}}}]).directive("eventFilterByUniversity",["$timeout","eventUtil",function(a,b){return{restrict:"A",require:"^studentEvents",link:function(c,d,e,f){c.expandUF=!1,c.$watch(function(){return c.metaData.selectedUnivs},function(){var a=[],e=!1;angular.forEach(c.metaData.selectedUnivs,function(f,g){if(f.isSelected)a.push(f);else{var h={};h.label=f.label,h.value=f.value,c.metaData.universities.push(h),c.metaData.universities.sort(b.sortByLabel),d.find(".event-universities-input").autocomplete("option","source",c.metaData.universities),e=!0}}),c.metaData.selectedUnivs=a,e||c.trackFilters()},!0),c.expandUniv=function(){$(".event-universities-input").focus()},c.$watch(function(){return f.metaData.universities},function(){function b(a,b){if(a&&a.length>0)for(var c,d,e,f=$.trim(a).toLowerCase(),g=b.get(0).firstChild;(c=g.data.toLowerCase().indexOf(f))>=0;)d=g.splitText(c),g=d.splitText(f.length),e=document.createElement("span"),e.className="highlight",g.parentNode.insertBefore(e,g),e.appendChild(d)}c.metaData.universities=f.metaData.universities,c.metaData.selectedUnivs=[],d.find(".event-universities-input").autocomplete({source:c.metaData.universities,minLength:0,select:function(b,e){var f={};f.label=e.item.label,f.value=e.item.value,f.isSelected=!0,c.metaData.selectedUnivs.push(f),c.$apply(),c.metaData.universities=jQuery.grep(c.metaData.universities,function(a){return a.value!==e.item.value}),d.find(".event-universities-input").autocomplete("option","source",c.metaData.universities),a(function(){$(".event-universities-input").val(""),$(".event-universities-input").blur()},100)},open:function(a,b){$(".ui-autocomplete").off("menufocus hover mouseover mouseenter")}}).on("focus",function(){$(this).keydown()}).on("blur",function(){$(this).val("")}).data("ui-autocomplete")._renderItem=function(a,c){var d=$("<a></a>").text(c.label);return b(this.term,d),$("<li></li>").append(d).appendTo(a)}},!0),c.updateUFView=function(a){void 0===a&&(a=!c.expandUF),c.expandUF=a,a&&(c.expandCF=!1,c.expandTF=!1),c.updateFiltersView()}}}}]).directive("eventSearch",[function(){return{restrict:"A",require:"^studentEvents",controller:["$scope","$attrs","$element",function(a,b,c){a.keyword=""}],link:function(a,b,c,d){a.eventSearch=function(){var b={};b.events=[],a.prglist=b}}}}]).directive("resetEventSearch",["$rootScope","eventUtil",function(a,b){return{restrict:"A",require:"^studentEvents",controller:["$scope","$attrs","$element",function(a,b,c){a.keyword=""}],link:function(c,d,e,f){c.filterEvents=function(d){"reset"===d&&(c.metaData.onlyActiveEvents=void 0,c.metaData.search=void 0,angular.forEach(c.metaData.types,function(a,b){a.isSelected&&(a.isSelected=!1)}),angular.forEach(c.metaData.locations,function(a,b){a.isSelected&&(a.isSelected=!1)}),angular.forEach(c.metaData.selectedUnivs,function(a,b){a.isSelected&&(a.isSelected=!1)}),c.expandCF=!0,c.expandTF=!1,c.expandUF=!1,c.metaDataMobile=b.modelDataCopy(c.metaData),c.updateFiltersView(),a.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:"see-all"}))}}}}]).directive("eventFilterMobile",["$timeout","eventUtil",function(a,b){return{restrict:"A",require:"^studentEvents",link:function(c,d,e,f){var g=f;c.metaDataMobile=b.modelDataCopy(c.metaData),$(".select-event-countries").on("change",function(){var b=$(".select-event-countries option:selected").val(),d={};d.label=$(".select-event-countries option:selected").text(),d.value=b,d.isSelected=!0,c.metaData.locations.push(d),c.$apply(),c.metaData.countries=jQuery.grep(c.metaData.countries,function(a){return a.value!==b}),a(function(){$(".select-event-countries").val("")},100)}),$(".select-event-universities").on("change",function(){var b=$(".select-event-universities option:selected").val(),d={};d.label=$(".select-event-universities option:selected").text(),d.value=b,d.isSelected=!0,c.metaData.selectedUnivs.push(d),c.$apply(),c.metaData.universities=jQuery.grep(c.metaData.universities,function(a){return a.value!==b}),a(function(){$(".select-event-universities").val("")},100)}),c.countryLabel=function(a){return a.label},c.universityLabel=function(a){return a.label},c.setUpdatesFromCollapseViewToExpandView=function(){c.metaDataMobile.search!==c.metaData.search&&(c.metaData.search=c.metaDataMobile.search),angular.forEach(c.metaData.types,function(a,b){a.isSelected=!1}),angular.forEach(c.metaDataMobile.types,function(a,b){angular.forEach(c.metaData.types,function(b,c){a.value===b.value&&(b.isSelected=a.isSelected)})}),c.metaData.locations=[],angular.forEach(c.metaDataMobile.locations,function(a,b){a.isSelected&&(c.metaData.locations.push($.extend(!0,{},a)),c.metaData.countries=jQuery.grep(c.metaData.countries,function(b){return b.value!==a.value}))}),c.metaData.selectedUnivs=[],angular.forEach(c.metaDataMobile.selectedUnivs,function(a,b){a.isSelected&&(c.metaData.selectedUnivs.push($.extend(!0,{},a)),c.metaData.universities=jQuery.grep(c.metaData.universities,function(b){return b.value!==a.value}))})},c.$watch(function(){return c.metaDataMobile.locations},function(a,b){var d=[],e=!1;angular.forEach(c.metaDataMobile.locations,function(a,b){a.isSelected?d.push($.extend(!0,{},a)):e=!0}),c.metaDataMobile.locations=d,e||c.trackFilters()},!0),c.$watch(function(){return c.metaDataMobile.selectedUnivs},function(){var a=[],b=!1;angular.forEach(c.metaDataMobile.selectedUnivs,function(c,d){c.isSelected?a.push($.extend(!0,{},c)):b=!0}),c.metaDataMobile.selectedUnivs=a,b||c.trackFilters()},!0),c.$watch(function(){return c.metaDataMobile.types},function(){c.trackFilters()},!0),c.$watch(function(){return c.metaData.selectedUnivs},function(){var a=[];angular.forEach(c.metaData.selectedUnivs,function(d,e){if(d.isSelected)a.push(d);else{var f={};f.label=d.label,f.value=d.value,c.metaData.universities.push(f),c.metaData.universities.sort(b.sortByLabel)}}),c.metaData.selectedUnivs=a},!0),c.$watch(function(){return c.metaData.locations},function(){var a=[];angular.forEach(c.metaData.locations,function(d,e){if(d.isSelected)a.push(d);else{var f={};f.label=d.label,f.value=d.value,c.metaData.countries.push(f),c.metaData.countries.sort(b.sortByLabel)}}),c.metaData.locations=a},!0),c.openFilter=function(a){$("html, body").addClass("disable-scroll"),$(".mobile-filter-options-view.slide-left").addClass("is-active"),$(".filter-view-bg").addClass("is-active")},c.closeFilterView=function(){$(".mobile-filter-options-view.slide-left").removeClass("is-active"),$(".filter-view-bg").removeClass("is-active"),$("html, body").removeClass("disable-scroll")},c.initMobileFilter=function(){$(".filter-view-bg").on("click",function(){c.updateView("discard-filter")})},c.initMobileFilter(),c.updateView=function(a){"expand-type"===a||"expand-location"===a||"expand-university"===a?("expand-type"===a?(c.expandTF=!0,c.updateFiltersView(),c.setUpdatesFromCollapseViewToExpandView(),$(".mobile .events-filter .expand-filter-container .type").css("display","block")):"expand-location"===a?(c.expandCF=!0,c.updateFiltersView(),c.metaData.countries=g.metaData.countries,c.metaData.locations=[],c.setUpdatesFromCollapseViewToExpandView(),$(".mobile .events-filter .expand-filter-container .location").css("display","block")):"expand-university"===a&&(c.expandUF=!0,c.updateFiltersView(),c.metaData.universities=g.metaData.universities,c.metaData.selectedUnivs=[],c.setUpdatesFromCollapseViewToExpandView(),$(".mobile .events-filter .expand-filter-container .university").css("display","block")),c.openFilter(a)):("apply-type-filter"===a||"apply-location-filter"===a||"apply-university-filter"===a||"discard-filter"===a)&&($(".mobile .events-filter .expand-filter-container .type").css("display","none"),$(".mobile .events-filter .expand-filter-container .location").css("display","none"),$(".mobile .events-filter .expand-filter-container .university").css("display","none"),c.closeFilterView(),"discard-filter"!==a?c.metaDataMobile=b.modelDataCopy(c.metaData):(c.metaData=b.modelDataCopy(c.metaDataMobile),c.$apply()))}}}}]).filter("eventFilter",["eventUtil",function(a){return function(b,c){if(b){var d=[],e=!1;return angular.forEach(b,function(b,f){var g=!0;if(g){var h=a.trimSpacesAndSpecialChars(b.event_classification),i=0,j=!1;angular.forEach(c.types,function(a,b){h===a.value&&a.isSelected&&i++,j=j||a.isSelected}),j&&(g=i>0)}if(g){var k=!1,l=!1,m=a.trimSpacesAndSpecialChars(b.country);angular.forEach(c.locations,function(a,b){a.isSelected&&(l=!0,a.value!==m||k||(k=!0))}),g=l?g&&k:g}if(g){var n=!1,o=!1,p=a.trimSpacesAndSpecialChars(b.campus_name);angular.forEach(c.selectedUnivs,function(a,b){a.isSelected&&(o=!0,a.value!==p||n||(n=!0))}),g=o?g&&n:g}if(g&&c.search){var q=c.search;g=a.searchByContains(b.event_name,q),g||(g=b.hasDesc&&a.searchByContains(b.external_description,q)),g||(g=a.searchByContains(b.event_classification,q)),g||(g=a.searchByContains(b.country,q)),g||(g=a.searchByContains(b.city,q)),g||(g=a.searchByContains(b.location_name,q)),g||(g=a.searchByContains(b.participating_region,q)),g||(g=a.searchByContains(b.campus_name,q))}g?d.push(b):b.displayMode="minimize",e=!0}),e?0===d.length&&$(".no-search-results").css("display","block"):$(".no-search-results").css("display","none"),e?d:b}}}]),angular.module("jpmorganApp").factory("programUtil",["$rootScope",function(a){var b=function(){function b(){}return b.prototype={shortText:function(a,b){var c="";return a.length>b?(c=a.slice(0,b).join(", "),c+=" ..."):c=a.join(", "),c},objectArrayDeepCopy:function(a){var b=[];return angular.forEach(a,function(a,c){b.push($.extend(!0,{},a))}),b},modelDataCopy:function(a){var b=this,c=[];return c.divisions=b.objectArrayDeepCopy(a.divisions),c.levelSelected=a.levelSelected,c.levels=b.objectArrayDeepCopy(a.levels),c.locations=b.objectArrayDeepCopy(a.locations),c.countries=[],c.types=b.objectArrayDeepCopy(a.types),c.search=a.search,c.onlyActivePrograms=a.onlyActivePrograms,c},trimSpacesAndSpecialChars:function(a){var b=a.replace(/[ !@#\$%\^\&*\)\(+=._-]/gi,"").toLowerCase();return b},searchByContains:function(a,b){var c=!1;return void 0!==a&&a.length>0&&(c=-1!==a.toLowerCase().indexOf(b.toLowerCase())),c},translateJapaneseLabelToEnglish:function(a){var b=a;return"インターンシップ"===b?b="Internship":"早期教育プログラム"===b?b="Early Insight (pre-internship)":"高校生対象プログラム"===b?b="School Programs":"正社員"===b&&(b="Full Time"),b},sortByLabel:function(b,c){if(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b.label)||a.checkIfJapanese(c.label)){if(a.checkIfJapanese(b.label)&&!a.checkIfJapanese(c.label))return-1;if(!a.checkIfJapanese(b.label)&&a.checkIfJapanese(c.label))return 1;if(a.checkIfJapanese(b.label)&&a.checkIfJapanese(c.label)){if(b.label.length<c.label.length)return-1;if(b.label.length>c.label.length)return 1}}else{if(b.label.toLowerCase()<c.label.toLowerCase())return-1;if(b.label.toLowerCase()>c.label.toLowerCase())return 1}return 0},sortByJapanese:function(b,c){if(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b)||a.checkIfJapanese(c)){if(a.checkIfJapanese(b)&&!a.checkIfJapanese(c))return-1;if(!a.checkIfJapanese(b)&&a.checkIfJapanese(c))return 1;if(a.checkIfJapanese(b)&&a.checkIfJapanese(c)){if(b.length<c.length)return-1;if(b.length>c.length)return 1}}else{if(b.toLowerCase()<c.toLowerCase())return-1;if(b.toLowerCase()>c.toLowerCase())return 1}return 0},programsSort:function(b,c){return b.program_weight<c.program_weight?1:b.program_weight>c.program_weight?-1:b.end_date-c.end_date!==0?b.end_date-c.end_date:(a.checkIfJapanese=function(a){var b=/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g;return!!b.test(a)},a.checkIfJapanese(b.program_name)||a.checkIfJapanese(c.program_name)?a.checkIfJapanese(b.program_name)&&!a.checkIfJapanese(c.program_name)?-1:!a.checkIfJapanese(b.program_name)&&a.checkIfJapanese(c.program_name)?1:a.checkIfJapanese(b.program_name)&&a.checkIfJapanese(c.program_name)?b.program_name.length<c.program_name.length?-1:b.program_name.length>c.program_name.length?1:0:void 0:b.program_name.toLowerCase()<c.program_name.toLowerCase()?-1:b.program_name.toLowerCase()>c.program_name.toLowerCase()?1:0)}},b}();return new b}]).factory("programDateUtil",[function(){var a=function(){function a(){}return a.prototype={parseExpiryDate:function(a){var b=null;return a?b=new Date(a):b,b},isOpen:function(a){var b=!1;return a&&(b=!0),b},isDeadlineApproaching:function(a){var b=!1,c=new Date;if(c.setHours(23,59,59),a){var d=a.getTime()-c.getTime();d>0&&12096e5>d&&(b=!0)}return b}},a}();return new a}]).factory("locationUrlParser",["$window",function(a){var b=function(){function b(){this.TYPE_PARAMETER="type",this.search={},this.init()}return b.prototype={init:function(){var b=this,c=a.location.search;if(c.length>0){var d=c.substring(1).split("&");d.length>0&&angular.forEach(d,function(a,c){var d=a.split("=");if(-1!==d[1].indexOf(","))b.search[d[0]]=d[1].split(",");else{var e=[];e.push(d[1]),b.search[d[0]]=e}})}},preselectTypes:function(a){this.selectTypesByParam(a,this.TYPE_PARAMETER)},selectTypesByParam:function(a,b){var c=this;angular.forEach(a,function(a,d){angular.forEach(c.search[b],function(b,c){var d=decodeURI(b);d=d.replace(/\+/g," "),a.label===d&&(a.isSelected=!0)})})}},b}();return new b}]).factory("programDataParser",["$rootScope","programUtil","locationUrlParser",function(a,b,c){var d=function(){function a(a,b){this.programsData=a,this.typesData=b,this.levels=[],this.countries=[],this.divisions=[],this.types={},this.init()}return a.prototype={init:function(){var a=this;angular.forEach(a.programsData,function(b,c){a.levels=a.levels.concat(b.levels),a.countries=a.countries.concat(b.countries),a.divisions=a.divisions.concat(b.divisions)}),a.levels=_.uniq(a.levels).sort(b.sortByJapanese),a.countries=_.uniq(a.countries).sort(b.sortByJapanese),a.divisions=_.uniq(a.divisions).sort(b.sortByJapanese),a.levels=a.prepareObjWithValue(a.levels),a.countries=a.prepareObjWithValue(a.countries),a.divisions=a.prepareObjWithValue(a.divisions),angular.forEach(a.programsData,function(c,d){var e=c.program_type,f=b.trimSpacesAndSpecialChars(e);a.pushType("all"),angular.forEach(c.levels,function(c,d){var e=b.trimSpacesAndSpecialChars(c);a.pushType(e,f)})}),c.preselectTypes(a.types.all),angular.forEach(a.types,function(a,b){1===a.length&&(a[0].isSelected=!0)})},prepareObjWithValue:function(a){var c=[];return angular.forEach(a,function(a,d){var e={};e.label=a,e.value=b.trimSpacesAndSpecialChars(a),c.push(e)}),c},pushType:function(a,c){var d=this;d.types[a]||(d.types[a]=[]),angular.forEach(d.typesData,function(e,f){var g={};if(g.label=e.name,g.value=b.trimSpacesAndSpecialChars(e.name),g.desc=e.description,g.color=e.color,"all"===a||c===g.value){var h=!1;angular.forEach(d.types[a],function(a,b){a.value===g.value&&(h=!0);
}),h||(d.types[a].push(g),d.types[a].sort(b.sortByLabel))}})},pushLevel:function(a,c){var d=this;d.levels[a]||(d.levels[a]=[]),angular.forEach(d.levelsData,function(e,f){var g={};if(g.label=e.name,g.value=b.trimSpacesAndSpecialChars(e.name),g.desc=e.description,g.color=e.color,"all"===a||c===g.value){var h=!1;angular.forEach(d.levels[a],function(a,b){a.value===g.value&&(h=!0)}),h||(d.levels[a].push(g),d.levels[a].sort(b.sortByLabel))}})},getTypes:function(){return this.types},load:function(a,b){var c=[];switch(a){case"levels":c=this.levels;break;case"countries":c=this.countries;break;case"divisions":c=this.divisions}angular.forEach(c,function(a,c){b.push(a)})}},a}();return function(a,b){return new d(a,b)}}]).factory("load",["$http",function(a){var b=function(){function b(){}return b.prototype={displayLoadingIcon:function(a){$(a).addClass("loader center")},removeLoadingIcon:function(a){$(a).removeClass("loader center")},getJson:function(b,c,d){a.get(b,{cache:!0}).success(function(a){d(!0,a,c)}).error(function(){d(!1,{},c)})}},b}();return new b}]).factory("programLoad",["$rootScope","load","programUtil","programDateUtil","programDataParser",function(a,b,c,d,e){var f=function(){function a(a,b,c){this.OP_FETCH_PROGRAMS="fetch-programs",this.OP_FETCH_PROGRAMS_DATE="fetch-programs-date",this.selector=a,this.programUrl=b,this.programDateUrl=c,this.markers={},this.programsData={},this.typesData={},this.programsDateData={},this.programs=[],this.levels=[],this.countries=[],this.divisions=[],this.types={},this.init()}return a.prototype={handleUrlResponse:function(a,f,g){var h=g.parent;switch(g.opId){case h.OP_FETCH_PROGRAMS:h.programsData=a?f.Programs:{},h.typesData=a?f.Types:{},h.markers.programsLoaded=!0;break;case h.OP_FETCH_PROGRAMS_DATE:h.programsDateData=a&&f.status?f.response.Programs:{},h.markers.programsDateLoaded=!0}if(h.markers.programsLoaded&&h.markers.programsDateLoaded){b.removeLoadingIcon(h.selector),angular.forEach(h.programsData,function(a,b){var e="";angular.forEach(h.programsDateData,function(b,c){a.program_id===parseInt(b.program_id)&&(e=b.end_date)}),a.end_date=d.parseExpiryDate(e),a.active=d.isOpen(a.end_date),a.isDeadlineApproaching=d.isDeadlineApproaching(a.end_date),a.style=c.trimSpacesAndSpecialChars(c.translateJapaneseLabelToEnglish(a.program_type)),a.levelsDisplayShort=c.shortText(a.levels,3),a.divisionsDisplayShort=c.shortText(a.divisions,2),a.countriesDisplayShort=c.shortText(a.countries,2),a.levelsDisplay=c.shortText(a.levels,a.levels.length),a.divisionsDisplay=c.shortText(a.divisions,a.divisions.length),a.countriesDisplay=c.shortText(a.countries,a.countries.length),a.displayMode="minimize",angular.forEach(h.typesData,function(b,c){a.program_type===b.name&&(a.type_color=b.color)}),h.programs.push(a)}),h.programs.sort(c.programsSort);var i=e(h.programs,h.typesData);if(i.load("levels",h.levels),i.load("countries",h.countries),i.load("divisions",h.divisions),!h.types.all){var j=i.getTypes();angular.forEach(j,function(a,b){h.types[b]=a})}}},init:function(){var a=this;b.displayLoadingIcon(a.selector);var c={};c.parent=a,c.opId=a.OP_FETCH_PROGRAMS,a.markers.programsLoaded=!1,b.getJson(a.programUrl,c,a.handleUrlResponse);var d={};d.parent=a,d.opId=a.OP_FETCH_PROGRAMS_DATE,a.markers.programsDateLoaded=!1,b.getJson(a.programDateUrl,d,a.handleUrlResponse)}},a}();return function(a,b,c,d){return new f(a,b,c,d)}}]).directive("careerPrograms",["$rootScope","$timeout","$sce","programLoad","programUtil",function(a,b,c,d,e){return{restrict:"E",controller:["$scope","$attrs","$element",function(f,g,h){var i=this;this.programs=[],this.typesMeta={},this.metaData=[],this.init=function(){var a=d(".loading-icon",g.url1,g.url2);i.programs=a.programs,i.typesMeta=a.types,this.metaData.divisions=a.divisions,this.metaData.countries=a.countries,this.metaData.types=[],this.metaData.levels=a.levels,f.metaData=[],f.metaData.levelSelected="all",f.metaDataMobile=[]},f.typeLabelDisplay=function(a){var b=f.nowrapAtHyphen(a.label);return e.trimSpacesAndSpecialChars(e.translateJapaneseLabelToEnglish(a.label)),b=b+'<span class="invisible-char">&#8209;</span><div class="dot" style="color: '+a.color+"; background-color: "+a.color+';"></div>',c.trustAsHtml(b)},f.programStyle=function(a){return"border: 1px solid "+a.type_color+"; border-top: 10px solid "+a.type_color+";"},f.nowrapAtHyphen=function(a){var b=a.split(" "),c="";return angular.forEach(b,function(a,b){c.length>0&&(c+=" "),c+=-1!==a.indexOf("-")?'<span class="nowrap">'+a+"</span>":a}),c},f.updateLevelsDisplay=function(a){f.metaData.levels=a},f.getSelectedFilterEntries=function(a){var b=[];return angular.forEach(a,function(a,c){a.isSelected&&b.push(a.label)}),b},f.isMobile=function(){return"mobile"===a.deviceResolution},f.trackFilters=function(){var b=f.metaData;f.isMobile()&&(b=f.metaDataMobile);var c=b.levelSelected,d=[];"all"!==c&&angular.forEach(b.levels,function(a,b){a.value===c&&d.push(a.label)}),d=d.concat(f.getSelectedFilterEntries(b.types)),d=d.concat(f.getSelectedFilterEntries(b.divisions)),d=d.concat(f.getSelectedFilterEntries(b.locations)),void 0!==b.onlyActivePrograms&&d.push("only active programs:"+b.onlyActivePrograms),void 0!==b.search&&d.push("search:"+b.search),d.length>0&&a.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:d.join()})},this.prevSearch="",$(".search-input").unbind("keyup").bind("keyup",function(a){b(function(){var a="";a=f.isMobile()?f.metaDataMobile.search:f.metaData.search,i.prevSearch!==a&&(f.trackFilters(),i.prevSearch=a)},1e3)}),$(".program-active-filter").unbind("change").bind("change",function(){f.trackFilters()}),$(document).on("change",".not-mobile #levelFilter",function(){f.trackFilters()}),f.updateFiltersView=function(a){var b=f.expandTF,c=[],d=f.metaData.levelSelected;if(b)c=i.typesMeta[d];else{var g=[];angular.forEach(i.typesMeta[d],function(a,b){a.isSelected&&g.push(a)}),c=g}f.metaData.types=c;var h=f.expandLF,j=[];if(h)j=e.objectArrayDeepCopy(i.metaData.levels);else{var k=[];angular.forEach(f.metaData.levels,function(a,b){a.value===d&&k.push(a)}),j=k}a||f.updateLevelsDisplay(j);var l=f.expandDF,m=[];if(l)m=i.metaData.divisions;else{var n=[];angular.forEach(f.metaData.divisions,function(a,b){a.isSelected&&n.push(a)}),m=n}f.metaData.divisions=m},this.init()}]}}]).directive("programList",[function(){return{restrict:"A",require:"^careerPrograms",link:function(a,b,c,d){var e={};e.programs=d.programs,a.prglist=e,a.programUrl=function(a){var b=a.program_url;if(void 0===b)return"#";if(b&&b.length>0){var c=b.match(/href="([^"]*)/);return c?b.match(/href="([^"]*)/)[1]:b}return"#"},a.programId=function(a){return"pid"+a.program_id},a.expandProgram=function(a){var b="minimize";if(a.displayMode===b&&(b="maximize"),a.displayMode=b,"minimize"===b?($(".pid"+a.program_id+" .maximize").addClass("slideup").removeClass("slidedown"),$(".pid"+a.program_id+" .minimize").removeClass("slideup ng-hide").addClass("slidedown")):"maximize"===b&&($(".pid"+a.program_id+" .minimize").addClass("slideup ng-hide").removeClass("slidedown"),$(".pid"+a.program_id+" .maximize").removeClass("slideup").addClass("slidedown")),"maximize"!==b){var c=($(".pid"+a.program_id+" .divisions-"+b).width(),$(".pid"+a.program_id+" .divisions-"+b).outerHeight());"maximize"===b&&a.divisionsDisplay.length>=70&&(c+=22);var d=$(".pid"+a.program_id+" .divisions-display");d.animate({height:c},300,"swing",function(){d.css("height","auto"),d.html($(".pid"+a.program_id+" .divisions-"+b).html())});var e=($(".pid"+a.program_id+" .locations-"+b).width(),$(".pid"+a.program_id+" .locations-"+b).outerHeight());"maximize"===b&&a.countriesDisplay.length>=70&&(e+=22);var f=$(".pid"+a.program_id+" .locations-display");f.animate({height:e},300,"swing",function(){f.css("height","auto"),f.html($(".pid"+a.program_id+" .locations-"+b).html())})}else $(".pid"+a.program_id+" .divisions-display").html($(".pid"+a.program_id+" .divisions-"+b).html()),$(".pid"+a.program_id+" .divisions-display").addClass("slidedown"),$(".pid"+a.program_id+" .locations-display").html($(".pid"+a.program_id+" .locations-"+b).html()),$(".pid"+a.program_id+" .locations-display").addClass("slidedown")}}}}]).directive("programFilterByLevel",[function(){return{restrict:"A",require:"^careerPrograms",link:function(a,b,c,d){a.updateLevelsDisplay(d.metaData.levels),a.$watch(function(){return a.metaData.levelSelected},function(b,c){a.updateFiltersView(!0)}),a.expandLF=!0,a.updateLFView=function(b){void 0===b&&(b=!a.expandLF),a.expandLF=b,b&&(a.expandTF=!1,a.expandDF=!1,a.expandCF=!1),a.updateFiltersView()}}}}]).directive("programFilterByType",[function(){return{restrict:"A",require:"^careerPrograms",link:function(a,b,c,d){a.$watch(function(){return d.typesMeta},function(){a.updateFiltersView(),a.trackFilters()},!0),a.expandTF=!1,a.updateTFView=function(b){void 0===b&&(b=!a.expandTF),a.expandTF=b,b&&(a.expandLF=!1,a.expandDF=!1,a.expandCF=!1),a.updateFiltersView()}}}}]).directive("programFilterByDivision",[function(){return{restrict:"A",require:"^careerPrograms",link:function(a,b,c,d){a.$watch(function(){return d.metaData.divisions},function(){a.updateFiltersView(),a.trackFilters()},!0),a.expandDF=!1,a.updateDFView=function(b){void 0===b&&(b=!a.expandDF),a.expandDF=b,b&&(a.expandLF=!1,a.expandTF=!1,a.expandCF=!1),a.updateFiltersView()},a.updateDFView(!1)}}}]).directive("programFilterByLocation",["$timeout","programUtil",function(a,b){return{restrict:"A",require:"^careerPrograms",link:function(c,d,e,f){c.$watch(function(){return c.metaData.locations},function(){var a=[],e=!1;angular.forEach(c.metaData.locations,function(f,g){if(f.isSelected)a.push(f);else{var h={};h.label=f.label,h.value=f.value,c.metaData.countries.push(h),c.metaData.countries.sort(b.sortByLabel),d.find(".program-countries").autocomplete("option","source",c.metaData.countries),e=!0}}),c.metaData.locations=a,e||c.trackFilters()},!0),c.expandList=function(){$(".program-countries").focus()},c.$watch(function(){return f.metaData.countries},function(){function b(a,b){if(a&&a.length>0)for(var c,d,e,f=$.trim(a).toLowerCase(),g=b.get(0).firstChild;(c=g.data.toLowerCase().indexOf(f))>=0;)d=g.splitText(c),g=d.splitText(f.length),e=document.createElement("span"),e.className="highlight",g.parentNode.insertBefore(e,g),e.appendChild(d)}c.metaData.countries=f.metaData.countries,c.metaData.locations=[],d.find(".program-countries").autocomplete({source:c.metaData.countries,minLength:0,select:function(b,e){var f={};f.label=e.item.label,f.value=e.item.value,f.isSelected=!0,c.metaData.locations.push(f),c.$apply(),c.metaData.countries=jQuery.grep(c.metaData.countries,function(a){return a.value!==e.item.value}),d.find(".program-countries").autocomplete("option","source",c.metaData.countries),a(function(){$(".program-countries").val(""),$(".program-countries").blur()},100)},open:function(a,b){$(".ui-autocomplete").off("menufocus hover mouseover mouseenter")}}).on("focus",function(){$(this).keydown()}).on("blur",function(){$(this).val("")}).data("ui-autocomplete")._renderItem=function(a,c){var d=$("<a></a>").text(c.label);return b(this.term,d),$("<li></li>").append(d).appendTo(a)}},!0),c.expandCF=!1,c.updateCFView=function(a){void 0===a&&(a=!c.expandCF),c.expandCF=a,a&&(c.expandLF=!1,c.expandTF=!1,c.expandDF=!1),c.updateFiltersView()}}}}]).directive("programSearch",[function(){return{restrict:"A",require:"^careerPrograms",controller:["$scope","$attrs","$element",function(a,b,c){a.keyword=""}],link:function(a,b,c,d){a.programSearch=function(){var b={};b.programs=[],a.prglist=b}}}}]).directive("resetProgramSearch",["$rootScope","programUtil",function(a,b){return{restrict:"A",require:"^careerPrograms",controller:["$scope","$attrs","$element",function(a,b,c){a.keyword=""}],link:function(c,d,e,f){c.filterPrograms=function(d){"reset"===d&&(c.metaData.onlyActivePrograms=void 0,c.metaData.search=void 0,c.metaData.levelSelected="all",angular.forEach(c.metaData.types,function(a,b){a.isSelected&&(a.isSelected=!1)}),angular.forEach(c.metaData.divisions,function(a,b){a.isSelected&&(a.isSelected=!1)}),angular.forEach(c.metaData.locations,function(a,b){a.isSelected&&(a.isSelected=!1)}),c.expandLF=!0,c.expandTF=!1,c.expandDF=!1,c.expandCF=!1,c.metaDataMobile=b.modelDataCopy(c.metaData),c.updateFiltersView(),a.$broadcast("track",{trackName:"eventFilter",setVar:"filter",setVarVal:"see-all"}))}}}}]).directive("programFilterMobile",["$timeout","programUtil",function(a,b){return{restrict:"A",require:"^careerPrograms",link:function(c,d,e,f){var g=f;c.metaDataMobile=b.modelDataCopy(c.metaData),c.initAutofilterByUrlParams=!1,c.$watch(function(){return f.typesMeta},function(){if(void 0!==f.typesMeta.all&&!c.initAutofilterByUrlParams){var a=[];angular.forEach(f.typesMeta.all,function(b,c){b.isSelected&&a.push(b)}),a.length>0&&(c.metaDataMobile.types=a),c.initAutofilterByUrlParams=!0}},!0),$(".select-program-countries").on("change",function(){var b=$(".select-program-countries option:selected").val(),d={};d.label=$(".select-program-countries option:selected").text(),d.value=b,d.isSelected=!0,c.metaData.locations.push(d),c.$apply(),c.metaData.countries=jQuery.grep(c.metaData.countries,function(a){return a.value!==b}),a(function(){$(".select-program-countries").val("")},100)}),c.countryLabel=function(a){return a.label},c.firstCountryLabel=function(a){return a.length>0?a[0].label:void 0},c.setUpdatesFromCollapseViewToExpandView=function(){c.metaDataMobile.levelSelected!==c.metaData.levelSelected&&(c.metaData.levelSelected=c.metaDataMobile.levelSelected),c.metaDataMobile.search!==c.metaData.search&&(c.metaData.search=c.metaDataMobile.search),c.metaDataMobile.onlyActivePrograms!==c.metaData.onlyActivePrograms&&(c.metaData.onlyActivePrograms=c.metaDataMobile.onlyActivePrograms),angular.forEach(c.metaDataMobile.types,function(a,b){angular.forEach(c.metaData.types,function(b,c){a.value===b.value&&(b.isSelected=a.isSelected)})}),angular.forEach(c.metaDataMobile.divisions,function(a,b){angular.forEach(c.metaData.divisions,function(b,c){a.value===b.value&&(b.isSelected=a.isSelected)})}),c.metaData.locations=[],angular.forEach(c.metaDataMobile.locations,function(a,b){a.isSelected&&(c.metaData.locations.push($.extend(!0,{},a)),c.metaData.countries=jQuery.grep(c.metaData.countries,function(b){return b.value!==a.value}))})},c.$watch(function(){return c.metaDataMobile.locations},function(){c.trackFilters()},!0),c.$watch(function(){return c.metaDataMobile.divisions},function(){c.trackFilters()},!0),c.$watch(function(){return c.metaDataMobile.types},function(){c.trackFilters()},!0),c.$watch(function(){return c.metaData.locations},function(){var a=[];angular.forEach(c.metaData.locations,function(d,e){if(d.isSelected)a.push(d);else{var f={};f.label=d.label,f.value=d.value,c.metaData.countries.push(f),c.metaData.countries.sort(b.sortByLabel)}}),c.metaData.locations=a},!0),c.openFilter=function(a){$("html, body").addClass("disable-scroll"),$(".mobile-filter-options-view.slide-left").addClass("is-active"),$(".filter-view-bg").addClass("is-active")},c.closeFilterView=function(){$(".mobile-filter-options-view.slide-left").removeClass("is-active"),$(".filter-view-bg").removeClass("is-active"),$("html, body").removeClass("disable-scroll")},c.initMobileFilter=function(){$(".filter-view-bg").on("click",function(){c.updateView("discard-filter")})},c.initMobileFilter(),c.updateView=function(a){"expand-level"===a||"expand-type"===a||"expand-division"===a||"expand-location"===a?("expand-level"===a?(c.expandLF=!0,$(".mobile .programs-filter .expand-filter-container .level").css("display","block"),c.updateFiltersView(),c.setUpdatesFromCollapseViewToExpandView()):"expand-type"===a?(c.expandTF=!0,c.updateFiltersView(),$(".mobile .programs-filter .expand-filter-container .type").css("display","block"),c.setUpdatesFromCollapseViewToExpandView()):"expand-division"===a?(c.expandDF=!0,c.updateFiltersView(),$(".mobile .programs-filter .expand-filter-container .division").css("display","block"),c.setUpdatesFromCollapseViewToExpandView()):"expand-location"===a&&(c.expandCF=!0,c.updateFiltersView(),c.metaData.countries=g.metaData.countries,c.metaData.locations=[],$(".mobile .programs-filter .expand-filter-container .location").css("display","block"),c.setUpdatesFromCollapseViewToExpandView()),c.openFilter(a)):("apply-level-filter"===a||"apply-type-filter"===a||"apply-division-filter"===a||"apply-location-filter"===a||"discard-filter"===a)&&($(".mobile .programs-filter .expand-filter-container .level").css("display","none"),$(".mobile .programs-filter .expand-filter-container .type").css("display","none"),$(".mobile .programs-filter .expand-filter-container .division").css("display","none"),$(".mobile .programs-filter .expand-filter-container .location").css("display","none"),c.closeFilterView(),"discard-filter"!==a?("apply-level-filter"===a&&c.updateFiltersView(),c.metaDataMobile=b.modelDataCopy(c.metaData)):(c.metaData=b.modelDataCopy(c.metaDataMobile),c.$apply()))}}}}]).filter("programFilter",["programUtil",function(a){return function(b,c,d){if(b){var e=[],f=0,g=!1;return angular.forEach(b,function(b,h){var i=!0;if(i&&(i=!c.onlyActivePrograms||b.active&&c.onlyActivePrograms),i&&"all"!==c.levelSelected){var j=0;angular.forEach(b.levels,function(b,d){var e=a.trimSpacesAndSpecialChars(b);e===c.levelSelected&&j++}),i=j>0}if(i){var k=a.trimSpacesAndSpecialChars(b.program_type),l=0,m=!1;angular.forEach(c.types,function(a,b){k===a.value&&a.isSelected&&l++,m=m||a.isSelected}),m&&(i=l>0)}if(i){var n=!1,o=!1;angular.forEach(b.divisions,function(b,d){var e=a.trimSpacesAndSpecialChars(b);angular.forEach(c.divisions,function(a,b){a.isSelected&&(o=!0,a.value!==e||n||(n=!0))})}),i=o?i&&n:i}if(i){var p=!1,q=!1;angular.forEach(b.countries,function(b,d){var e=a.trimSpacesAndSpecialChars(b);angular.forEach(c.locations,function(a,b){a.isSelected&&(q=!0,a.value!==e||p||(p=!0))})}),i=q?i&&p:i}if(i&&c.search){var r=c.search;i=a.searchByContains(b.program_name,r),i||(i=a.searchByContains(b.program_description,r)),i||(i=a.searchByContains(b.countriesDisplay,r)),i||(i=a.searchByContains(b.divisionsDisplay,r)),i||(i=a.searchByContains(b.program_type,r)),i||angular.forEach(b.levels,function(b,c){i=i||a.searchByContains(b,r)})}i&&("even"===d?i=f%2===0:"odd"===d&&(i=f%2!==0),f++,i&&e.push(b)),g=!0}),g?0===e.length&&$(".no-search-results").css("display","block"):$(".no-search-results").css("display","none"),g?e:b}}}]),angular.module("jpmorganApp").run(["$templateCache",function(a){a.put("views/_modules/video.html",""),a.put("views/_modules/map.html",'<div data-ui-gmap-google-map class="hidden-xs" control="googleMap" options="mapSets.options" refresh="refresh" center="mapSets.center" zoom="mapSets.zoom">\n\t<div data-ng-repeat="marker in markers" data-ui-gmap-marker coords="marker.coords" options="marker.options" idkey="marker.id"></div>\n</div>\n\n<div class="map-link hidden-xs" data-ng-if="navigateMapHref">\n\t<a data-ng-href="{{navigateMapHref}}" target="_blank">Open in Google Maps</a>\n</div>\n\n<div class="visible-xs hidden-sm hidden-md hidden-lg margin-top-md margin-bottom-md">\n  <i class="location-ico icon-loction margin-bottom-sm"></i>\n  <a data-ng-href="{{navigateMapHref}}" target="_blank" class="header-font-family delta">View our locations</a>\n</div>\n')}]);var scroller={},navOpen=!1,$body=$("body");if(scroller.didScroll=!1,scroller.lastScrollTop=0,scroller.delta=50,scroller.navbarHeight=$("#header").outerHeight(),scroller.scrollHandler=function(){var a=$(window).scrollTop();Math.abs(scroller.lastScrollTop-a)<=scroller.delta||(a>scroller.lastScrollTop&&a>scroller.navbarHeight?($("#header").removeClass("header--fixed").addClass("header--hidden"),$body.removeClass("header--fixed")):(a+$(window).height()<$(document).height()&&($("#header").removeClass("header--hidden").addClass("header--fixed"),$("#page-title").removeClass("hide").addClass("page-title"),$body.addClass("header--fixed")),a<scroller.navbarHeight&&($("#header").removeClass("header--hidden").removeClass("header--fixed"),$("#page-title").removeClass("page-title").addClass("hide"),$body.removeClass("header--fixed"))),scroller.lastScrollTop=a)},$(window).scroll(function(){scroller.didScroll=!0}),setInterval(function(){scroller.didScroll&&($body.hasClass("disable-scroll")||scroller.scrollHandler(),scroller.didScroll=!1)},250),$("#header").mouseenter(function(a){$(a.currentTarget).hasClass("header--hidden")&&($(a.currentTarget).removeClass("header--hidden").addClass("header--fixed"),$body.addClass("header--fixed"))}),$(".nav-main .js-toggle-action").click(function(){$(".nav-main").toggleClass("nav-main--open"),$("html, body").toggleClass("disable-scroll"),$("#page-title").toggleClass("hide page-title"),$body.hasClass("disable-scroll")&&(navOpen=!0)}),$(document).ready(function(){$(".scroll-top").hide(),$(function(){$(window).scroll(function(){$(this).scrollTop()>600?$(".scroll-top").fadeIn():$(".scroll-top").fadeOut()}),$(".scroll-top a").click(function(){return $("body,html").animate({scrollTop:0},800),!1})})}),$(".jpscroll").nanoScroller({paneClass:"jpscroll__pane",sliderClass:"jpscroll__slider",contentClass:"jpscroll__content",tabIndex:0,preventPageScrolling:!0,iOSNativeScrolling:!1}),$(".stat-circle").each(function(){var a=$(this),b=!1;$(document).ready(function(){isScrolledIntoView(a)&&b===!1&&(a.circles(),b=!0)}),$(window).scroll(function(){isScrolledIntoView(a)&&b===!1&&(a.circles(),b=!0)})}),$(".js-float-content").length>0){var sticky=$(".js-float-content"),scrollVal=0,initialStickyScroll=sticky.offset().top,$windowCache=$(window);$(window).scroll(function(){scrollVal=$windowCache.scrollTop(),scrollVal>=initialStickyScroll?sticky.addClass("fixed-float-content"):sticky.removeClass("fixed-float-content")})}$(window).on("scroll",function(){$(".page__article .page__article--title").each(function(){if($(window).scrollTop()>=$(this).offset().top){var a=$(this).attr("id");$(".js-nav-highlight ul li a").removeClass("active"),$(".js-nav-highlight ul li a[href=#"+a+"]").addClass("active")}})}),$(window).on("hashchange",function(){offsetAnchor()}),$(window).ready(function(){var a=$("#img-txt-split__img");if(a.length)var b=setInterval(function(){var c=a.closest("span").hasClass("bttrlazyloading-loaded");if(c){clearInterval(b);var d=a.height()+"px";d<="476px"&&a.closest("#division-hero-container").find(".img-txt-split__content,.img-txt-split").css("height",d)}},100)}),window.setTimeout(function(){offsetAnchor()},1);
//# sourceMappingURL=scripts.js.map